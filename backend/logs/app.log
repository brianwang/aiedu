2025-07-08 13:12:45,238 - __main__ - WARNING - AI路由未找到，跳过加载
2025-07-08 13:12:45,387 - __main__ - INFO - 应用启动中...
2025-07-08 13:12:45,413 - __main__ - INFO - 数据库初始化完成
2025-07-08 13:18:51,998 - __main__ - INFO - 应用关闭中...
2025-07-08 13:18:54,264 - __main__ - WARNING - AI路由未找到，跳过加载
2025-07-08 13:18:54,355 - __main__ - INFO - 应用启动中...
2025-07-08 13:18:54,358 - __main__ - INFO - 数据库初始化完成
2025-07-08 13:20:11,383 - app.api.auth - ERROR - Login error: (sqlite3.OperationalError) no such column: users.full_name
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.username AS users_username, users.password AS users_password, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar AS users_avatar, users.phone AS users_phone, users.bio AS users_bio, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.role AS users_role, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login, users.study_level AS users_study_level, users.preferred_subjects AS users_preferred_subjects 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?]
[parameters: ('20099514@qq.com', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: users.full_name

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 50, in simple_login
    user = auth_service.authenticate_user(form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 19, in authenticate_user
    user = self.db.query(User).filter(User.username == username).first()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: users.full_name
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.username AS users_username, users.password AS users_password, users.hashed_password AS users_hashed_password, users.full_name AS users_full_name, users.avatar AS users_avatar, users.phone AS users_phone, users.bio AS users_bio, users.is_active AS users_is_active, users.is_verified AS users_is_verified, users.is_superuser AS users_is_superuser, users.role AS users_role, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.last_login AS users_last_login, users.study_level AS users_study_level, users.preferred_subjects AS users_preferred_subjects 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?]
[parameters: ('20099514@qq.com', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-08 13:35:39,825 - app.api.auth - WARNING - Login failed for username: testuser
2025-07-08 13:35:39,828 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 13:35:46,430 - app.api.auth - WARNING - Login failed for username: testuser
2025-07-08 13:35:46,430 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 13:35:51,853 - app.api.auth - WARNING - Login failed for username: admin
2025-07-08 13:35:51,854 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 13:36:00,012 - __main__ - INFO - 应用关闭中...
2025-07-08 13:36:02,048 - __main__ - WARNING - AI路由未找到，跳过加载
2025-07-08 13:36:02,133 - __main__ - INFO - 应用启动中...
2025-07-08 13:36:02,136 - __main__ - INFO - 数据库初始化完成
2025-07-08 13:36:03,838 - app.api.auth - WARNING - Login failed for username: admin
2025-07-08 13:36:03,839 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 13:37:09,618 - app.api.auth - WARNING - Login failed for username: admin
2025-07-08 13:37:09,619 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 13:51:40,087 - app.api.auth - ERROR - Login error: 'Settings' object has no attribute 'ACCESS_TOKEN_EXPIRE_MINUTES'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 28, in create_access_token_for_user
    minutes=settings.ACCESS_TOKEN_EXPIRE_MINUTES)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'ACCESS_TOKEN_EXPIRE_MINUTES'
2025-07-08 13:52:38,840 - __main__ - INFO - 应用关闭中...
2025-07-08 13:52:40,589 - __main__ - WARNING - AI路由未找到，跳过加载
2025-07-08 13:52:47,110 - __main__ - WARNING - AI路由未找到，跳过加载
2025-07-08 13:59:05,341 - __main__ - WARNING - AI路由未找到，跳过加载: cannot import name 'get_current_user' from 'app.services.auth_service' (C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py)
2025-07-08 13:59:06,543 - __mp_main__ - WARNING - AI路由未找到，跳过加载: cannot import name 'get_current_user' from 'app.services.auth_service' (C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py)
2025-07-08 13:59:06,668 - main - WARNING - AI路由未找到，跳过加载: cannot import name 'get_current_user' from 'app.services.auth_service' (C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py)
2025-07-08 13:59:06,669 - main - INFO - 应用启动中...
2025-07-08 13:59:06,672 - main - INFO - 数据库初始化完成
2025-07-08 13:59:24,854 - app.api.auth - WARNING - Login failed for username: nonexistent
2025-07-08 13:59:24,854 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 13:59:59,047 - app.api.auth - ERROR - Registration error: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('test@example.com', 'testuser', None, '$2b$12$hpa0sKjq0/eYxNsGv/Oof.ZCfemcSGQrbKKO6UZbjQ0K6SPneNNNa', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 05:59:59.046741', '2025-07-08 05:59:59.046741', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: users.username

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 103, in register_user
    user = auth_service.create_user(username=form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 38, in create_user
    self.db.commit()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('test@example.com', 'testuser', None, '$2b$12$hpa0sKjq0/eYxNsGv/Oof.ZCfemcSGQrbKKO6UZbjQ0K6SPneNNNa', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 05:59:59.046741', '2025-07-08 05:59:59.046741', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 14:01:14,625 - main - INFO - 应用关闭中...
2025-07-08 14:01:47,412 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:01:47,495 - main - INFO - AI路由加载成功
2025-07-08 14:01:47,497 - main - INFO - 应用启动中...
2025-07-08 14:01:47,499 - main - INFO - 数据库初始化完成
2025-07-08 14:01:53,942 - main - INFO - 应用关闭中...
2025-07-08 14:01:54,999 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:01:55,081 - main - INFO - AI路由加载成功
2025-07-08 14:01:55,083 - main - INFO - 应用启动中...
2025-07-08 14:01:55,086 - main - INFO - 数据库初始化完成
2025-07-08 14:17:10,912 - __main__ - INFO - AI路由加载成功
2025-07-08 14:17:11,856 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:17:11,940 - main - INFO - AI路由加载成功
2025-07-08 14:17:11,942 - main - INFO - 应用启动中...
2025-07-08 14:17:11,944 - main - INFO - 数据库初始化完成
2025-07-08 14:17:20,105 - main - INFO - 应用关闭中...
2025-07-08 14:17:24,995 - app.api.auth - ERROR - Login error: 'Settings' object has no attribute 'SECRET_KEY'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 34, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\utils\jwt.py", line 37, in create_access_token
    settings.SECRET_KEY,
    ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'SECRET_KEY'
2025-07-08 14:18:02,550 - main - INFO - 应用关闭中...
2025-07-08 14:18:04,800 - __main__ - INFO - AI路由加载成功
2025-07-08 14:18:05,787 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:18:05,859 - main - INFO - AI路由加载成功
2025-07-08 14:18:05,861 - main - INFO - 应用启动中...
2025-07-08 14:18:05,864 - main - INFO - 数据库初始化完成
2025-07-08 14:18:43,093 - app.api.auth - ERROR - Login error: 'Settings' object has no attribute 'SECRET_KEY'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 34, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\utils\jwt.py", line 37, in create_access_token
    settings.SECRET_KEY,
    ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'SECRET_KEY'
2025-07-08 14:19:02,345 - main - INFO - 应用关闭中...
2025-07-08 14:19:03,512 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:19:03,600 - main - INFO - AI路由加载成功
2025-07-08 14:19:03,603 - main - INFO - 应用启动中...
2025-07-08 14:19:03,606 - main - INFO - 数据库初始化完成
2025-07-08 14:19:08,227 - main - INFO - 应用关闭中...
2025-07-08 14:19:09,246 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:19:09,323 - main - INFO - AI路由加载成功
2025-07-08 14:19:09,325 - main - INFO - 应用启动中...
2025-07-08 14:19:09,328 - main - INFO - 数据库初始化完成
2025-07-08 14:19:13,368 - __main__ - INFO - AI路由加载成功
2025-07-08 14:19:14,489 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:19:14,584 - main - INFO - AI路由加载成功
2025-07-08 14:19:14,586 - main - INFO - 应用启动中...
2025-07-08 14:19:14,589 - main - INFO - 数据库初始化完成
2025-07-08 14:19:23,529 - app.api.auth - ERROR - Registration error: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('test@example.com', 'testuser', None, '$2b$12$vkbIF5kN83lsxb3VCqZ84esv15WFU3Ds.f1HgYgG9m/C8tKPwDaie', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 06:19:23.527339', '2025-07-08 06:19:23.527339', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: users.username

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 103, in register_user
    user = auth_service.create_user(username=form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 43, in create_user
    self.db.commit()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('test@example.com', 'testuser', None, '$2b$12$vkbIF5kN83lsxb3VCqZ84esv15WFU3Ds.f1HgYgG9m/C8tKPwDaie', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 06:19:23.527339', '2025-07-08 06:19:23.527339', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 14:20:06,757 - app.api.auth - ERROR - Registration error: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('test@example.com', 'testuser', None, '$2b$12$aD/2Yptr1wKTRaT1QUSnX.uLBmUHG5usWwNPbLyklpiYd3.tZI2r6', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 06:20:06.756562', '2025-07-08 06:20:06.756562', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: users.username

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 103, in register_user
    user = auth_service.create_user(username=form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 43, in create_user
    self.db.commit()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('test@example.com', 'testuser', None, '$2b$12$aD/2Yptr1wKTRaT1QUSnX.uLBmUHG5usWwNPbLyklpiYd3.tZI2r6', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 06:20:06.756562', '2025-07-08 06:20:06.756562', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 14:24:55,096 - app.api.auth - WARNING - Login failed for username: 20099514@qq.com
2025-07-08 14:24:55,096 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 14:25:00,904 - app.api.auth - WARNING - Login failed for username: admin1
2025-07-08 14:25:00,905 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 14:25:15,340 - app.api.auth - WARNING - Login failed for username: testuser
2025-07-08 14:25:15,341 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 14:25:25,533 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 14:29:41,863 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 14:31:30,693 - main - INFO - 应用关闭中...
2025-07-08 14:31:32,240 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:31:32,390 - main - INFO - AI路由加载成功
2025-07-08 14:31:32,394 - main - INFO - 应用启动中...
2025-07-08 14:31:32,401 - main - INFO - 数据库初始化完成
2025-07-08 14:32:25,361 - main - INFO - 应用关闭中...
2025-07-08 14:32:26,568 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:32:26,647 - main - INFO - AI路由加载成功
2025-07-08 14:32:26,649 - main - INFO - 应用启动中...
2025-07-08 14:32:26,652 - main - INFO - 数据库初始化完成
2025-07-08 14:34:02,773 - main - INFO - 应用关闭中...
2025-07-08 14:34:07,558 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:34:07,680 - main - INFO - AI路由加载成功
2025-07-08 14:34:07,728 - main - INFO - 应用启动中...
2025-07-08 14:34:07,736 - main - INFO - 数据库初始化完成
2025-07-08 14:35:13,863 - main - INFO - 应用关闭中...
2025-07-08 14:35:16,107 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 14:35:16,369 - main - INFO - AI路由加载成功
2025-07-08 14:35:16,457 - main - INFO - 应用启动中...
2025-07-08 14:35:16,554 - main - INFO - 数据库初始化完成
2025-07-08 14:35:23,745 - main - INFO - 应用关闭中...
2025-07-08 15:11:42,277 - __main__ - INFO - AI路由加载成功
2025-07-08 15:11:43,256 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:11:43,373 - main - INFO - AI路由加载成功
2025-07-08 15:11:43,375 - main - INFO - 应用启动中...
2025-07-08 15:11:43,384 - main - INFO - 数据库初始化完成
2025-07-08 15:16:49,391 - app.api.auth - ERROR - Login error: Mapper 'Mapper[User(users)]' has no property 'profile'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2522, in get_property
    return self._props[key]
           ~~~~~~~~~~~^^^^^
KeyError: 'profile'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 50, in simple_login
    user = auth_service.authenticate_user(form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 24, in authenticate_user
    user = self.db.query(User).filter(User.username == username).first()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2145, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1592, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2524, in get_property
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[User(users)]' has no property 'profile'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-07-08 15:20:44,562 - app.api.auth - ERROR - Login error: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[UserProfile(user_profiles)]'. Original exception was: Mapper 'Mapper[User(users)]' has no property 'profile'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 50, in simple_login
    user = auth_service.authenticate_user(form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 24, in authenticate_user
    user = self.db.query(User).filter(User.username == username).first()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[UserProfile(user_profiles)]'. Original exception was: Mapper 'Mapper[User(users)]' has no property 'profile'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-07-08 15:23:12,193 - main - INFO - 应用关闭中...
2025-07-08 15:23:14,455 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:23:14,629 - main - INFO - AI路由加载成功
2025-07-08 15:23:14,630 - main - INFO - 应用启动中...
2025-07-08 15:23:14,639 - main - INFO - 数据库初始化完成
2025-07-08 15:23:36,044 - main - INFO - 应用关闭中...
2025-07-08 15:23:37,135 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:23:37,231 - main - INFO - AI路由加载成功
2025-07-08 15:23:37,232 - main - INFO - 应用启动中...
2025-07-08 15:23:37,235 - main - INFO - 数据库初始化完成
2025-07-08 15:23:46,321 - main - INFO - 应用关闭中...
2025-07-08 15:23:47,473 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:23:47,567 - main - INFO - AI路由加载成功
2025-07-08 15:23:47,568 - main - INFO - 应用启动中...
2025-07-08 15:23:47,571 - main - INFO - 数据库初始化完成
2025-07-08 15:24:03,483 - main - INFO - 应用关闭中...
2025-07-08 15:24:04,593 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:24:04,682 - main - INFO - AI路由加载成功
2025-07-08 15:24:04,683 - main - INFO - 应用启动中...
2025-07-08 15:24:04,686 - main - INFO - 数据库初始化完成
2025-07-08 15:24:07,850 - __main__ - INFO - AI路由加载成功
2025-07-08 15:24:09,039 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:24:09,143 - main - INFO - AI路由加载成功
2025-07-08 15:24:09,145 - main - INFO - 应用启动中...
2025-07-08 15:24:09,148 - main - INFO - 数据库初始化完成
2025-07-08 15:24:25,497 - app.api.auth - ERROR - Login error: Could not determine join condition between parent/child tables on relationship UserProfile.learning_goals - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2435, in _determine_joins
    self.primaryjoin = join_condition(
                       ^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\util.py", line 123, in join_condition
    return Join._join_condition(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1444, in _join_condition
    raise exc.NoForeignKeysError(
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'user_profiles' and 'learning_goals'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 50, in simple_login
    user = auth_service.authenticate_user(form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 24, in authenticate_user
    user = self.db.query(User).filter(User.username == username).first()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1658, in do_init
    self._setup_join_conditions()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1896, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2322, in __init__
    self._determine_joins()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2456, in _determine_joins
    raise sa_exc.NoForeignKeysError(
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship UserProfile.learning_goals - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-07-08 15:24:48,906 - main - INFO - 应用关闭中...
2025-07-08 15:24:49,128 - main - INFO - 应用关闭中...
2025-07-08 15:24:50,120 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:24:50,240 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:24:50,258 - main - INFO - AI路由加载成功
2025-07-08 15:24:50,259 - main - INFO - 应用启动中...
2025-07-08 15:24:50,263 - main - INFO - 数据库初始化完成
2025-07-08 15:24:50,360 - main - INFO - AI路由加载成功
2025-07-08 15:24:50,362 - main - INFO - 应用启动中...
2025-07-08 15:24:50,365 - main - INFO - 数据库初始化完成
2025-07-08 15:24:59,456 - __main__ - INFO - AI路由加载成功
2025-07-08 15:25:00,703 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:25:00,800 - main - INFO - AI路由加载成功
2025-07-08 15:25:00,802 - main - INFO - 应用启动中...
2025-07-08 15:25:00,804 - main - INFO - 数据库初始化完成
2025-07-08 15:25:07,313 - app.api.auth - ERROR - Login error: Could not determine join condition between parent/child tables on relationship UserProfile.learning_goals - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2435, in _determine_joins
    self.primaryjoin = join_condition(
                       ^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\util.py", line 123, in join_condition
    return Join._join_condition(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1444, in _join_condition
    raise exc.NoForeignKeysError(
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'user_profiles' and 'learning_goals'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 50, in simple_login
    user = auth_service.authenticate_user(form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 24, in authenticate_user
    user = self.db.query(User).filter(User.username == username).first()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1658, in do_init
    self._setup_join_conditions()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1896, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2322, in __init__
    self._determine_joins()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2456, in _determine_joins
    raise sa_exc.NoForeignKeysError(
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship UserProfile.learning_goals - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-07-08 15:26:10,668 - app.api.auth - ERROR - Login error: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[UserProfile(user_profiles)]'. Original exception was: Could not determine join condition between parent/child tables on relationship UserProfile.learning_goals - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 50, in simple_login
    user = auth_service.authenticate_user(form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 24, in authenticate_user
    user = self.db.query(User).filter(User.username == username).first()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4251, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[UserProfile(user_profiles)]'. Original exception was: Could not determine join condition between parent/child tables on relationship UserProfile.learning_goals - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-07-08 15:26:17,094 - __main__ - INFO - AI路由加载成功
2025-07-08 15:26:18,049 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:26:18,130 - main - INFO - AI路由加载成功
2025-07-08 15:26:18,131 - main - INFO - 应用启动中...
2025-07-08 15:26:18,133 - main - INFO - 数据库初始化完成
2025-07-08 15:26:34,546 - main - INFO - 应用关闭中...
2025-07-08 15:30:18,843 - __main__ - INFO - AI路由加载成功
2025-07-08 15:30:19,727 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:30:19,840 - main - INFO - AI路由加载成功
2025-07-08 15:30:19,841 - main - INFO - 应用启动中...
2025-07-08 15:30:19,844 - main - INFO - 数据库初始化完成
2025-07-08 15:30:32,349 - app.api.auth - ERROR - Login error: Could not determine join condition between parent/child tables on relationship UserProfile.learning_goals - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2435, in _determine_joins
    self.primaryjoin = join_condition(
                       ^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\util.py", line 123, in join_condition
    return Join._join_condition(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1444, in _join_condition
    raise exc.NoForeignKeysError(
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'user_profiles' and 'learning_goals'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 50, in simple_login
    user = auth_service.authenticate_user(form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 24, in authenticate_user
    user = self.db.query(User).filter(User.username == username).first()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1658, in do_init
    self._setup_join_conditions()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1896, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2322, in __init__
    self._determine_joins()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2456, in _determine_joins
    raise sa_exc.NoForeignKeysError(
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship UserProfile.learning_goals - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-07-08 15:33:23,799 - main - INFO - 应用关闭中...
2025-07-08 15:33:25,088 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:33:25,231 - main - INFO - AI路由加载成功
2025-07-08 15:33:25,232 - main - INFO - 应用启动中...
2025-07-08 15:33:25,235 - main - INFO - 数据库初始化完成
2025-07-08 15:33:36,260 - __main__ - INFO - AI路由加载成功
2025-07-08 15:33:37,715 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:33:37,836 - main - INFO - AI路由加载成功
2025-07-08 15:33:37,837 - main - INFO - 应用启动中...
2025-07-08 15:33:37,841 - main - INFO - 数据库初始化完成
2025-07-08 15:33:52,594 - app.api.auth - ERROR - Login error: Could not determine join condition between parent/child tables on relationship UserProfile.learning_plans - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2435, in _determine_joins
    self.primaryjoin = join_condition(
                       ^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\util.py", line 123, in join_condition
    return Join._join_condition(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\selectable.py", line 1444, in _join_condition
    raise exc.NoForeignKeysError(
sqlalchemy.exc.NoForeignKeysError: Can't find any foreign key relationships between 'user_profiles' and 'learning_plans'.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 50, in simple_login
    user = auth_service.authenticate_user(form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 24, in authenticate_user
    user = self.db.query(User).filter(User.username == username).first()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2955, in query
    return self._query_cls(entities, self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 276, in __init__
    self._set_entities(entities)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 289, in _set_entities
    coercions.expect(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\coercions.py", line 388, in expect
    insp._post_inspect
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1658, in do_init
    self._setup_join_conditions()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1896, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2322, in __init__
    self._determine_joins()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2456, in _determine_joins
    raise sa_exc.NoForeignKeysError(
sqlalchemy.exc.NoForeignKeysError: Could not determine join condition between parent/child tables on relationship UserProfile.learning_plans - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-07-08 15:34:48,312 - __main__ - INFO - AI路由加载成功
2025-07-08 15:34:49,491 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:34:49,615 - main - INFO - AI路由加载成功
2025-07-08 15:34:49,616 - main - INFO - 应用启动中...
2025-07-08 15:34:49,620 - main - INFO - 数据库初始化完成
2025-07-08 15:34:57,113 - app.api.auth - WARNING - Login failed for username: testuser
2025-07-08 15:34:57,113 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 15:35:04,045 - app.api.auth - ERROR - Registration error: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('newuser@example.com', 'newuser', None, '$2b$12$euyX01ReKixijmkWz/WKteNbB8K7Arih8v8EE6bGSVD0c307UmUJa', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 07:35:04.044426', '2025-07-08 07:35:04.044426', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: users.username

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 103, in register_user
    user = auth_service.create_user(username=form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 43, in create_user
    self.db.commit()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('newuser@example.com', 'newuser', None, '$2b$12$euyX01ReKixijmkWz/WKteNbB8K7Arih8v8EE6bGSVD0c307UmUJa', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 07:35:04.044426', '2025-07-08 07:35:04.044426', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 15:35:10,600 - app.api.auth - WARNING - Login failed for username: student1
2025-07-08 15:35:10,600 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 15:36:34,623 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 15:39:28,567 - main - INFO - 应用关闭中...
2025-07-08 15:39:29,824 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:39:29,941 - main - INFO - AI路由加载成功
2025-07-08 15:39:29,942 - main - INFO - 应用启动中...
2025-07-08 15:39:29,945 - main - INFO - 数据库初始化完成
2025-07-08 15:41:08,548 - main - INFO - 应用关闭中...
2025-07-08 15:41:09,719 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:41:09,840 - main - INFO - AI路由加载成功
2025-07-08 15:41:09,841 - main - INFO - 应用启动中...
2025-07-08 15:41:09,844 - main - INFO - 数据库初始化完成
2025-07-08 15:41:21,103 - main - INFO - 应用关闭中...
2025-07-08 15:41:22,324 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:41:22,428 - main - INFO - AI路由加载成功
2025-07-08 15:41:22,429 - main - INFO - 应用启动中...
2025-07-08 15:41:22,432 - main - INFO - 数据库初始化完成
2025-07-08 15:41:34,167 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-08 15:41:34,167 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 15:42:22,446 - app.api.auth - WARNING - Login failed for username: testuser
2025-07-08 15:42:22,447 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 15:44:31,657 - __main__ - INFO - AI路由加载成功
2025-07-08 15:44:32,802 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:44:32,905 - main - INFO - AI路由加载成功
2025-07-08 15:44:32,906 - main - INFO - 应用启动中...
2025-07-08 15:44:32,909 - main - INFO - 数据库初始化完成
2025-07-08 15:51:45,370 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 15:55:43,689 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 15:57:02,871 - main - INFO - 应用关闭中...
2025-07-08 15:57:03,971 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:57:04,083 - main - INFO - AI路由加载成功
2025-07-08 15:57:04,084 - main - INFO - 应用启动中...
2025-07-08 15:57:04,086 - main - INFO - 数据库初始化完成
2025-07-08 15:57:26,970 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-08 15:57:26,972 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 15:57:31,773 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 15:57:42,328 - main - INFO - 应用关闭中...
2025-07-08 15:57:45,984 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:57:46,157 - main - INFO - AI路由加载成功
2025-07-08 15:57:46,159 - main - INFO - 应用启动中...
2025-07-08 15:57:46,163 - main - INFO - 数据库初始化完成
2025-07-08 15:58:00,916 - main - INFO - 应用关闭中...
2025-07-08 15:58:01,967 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:58:02,058 - main - INFO - AI路由加载成功
2025-07-08 15:58:02,059 - main - INFO - 应用启动中...
2025-07-08 15:58:02,064 - main - INFO - 数据库初始化完成
2025-07-08 15:58:08,168 - app.api.auth - INFO - User testuser2 logged in successfully
2025-07-08 15:58:10,201 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (6,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (6,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-08 15:58:11,250 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 15:58:20,426 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_goals.user_profile_id
[SQL: SELECT learning_goals.id AS learning_goals_id, learning_goals.user_id AS learning_goals_user_id, learning_goals.user_profile_id AS learning_goals_user_profile_id, learning_goals.subject AS learning_goals_subject, learning_goals.skill_area AS learning_goals_skill_area, learning_goals.target_level AS learning_goals_target_level, learning_goals.target_timeframe AS learning_goals_target_timeframe, learning_goals.priority AS learning_goals_priority, learning_goals.status AS learning_goals_status, learning_goals.created_at AS learning_goals_created_at 
FROM learning_goals 
WHERE learning_goals.user_id = ?]
[parameters: (6,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_goals.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 112, in get_learning_goals
    goals = db.query(LearningGoal).filter(LearningGoal.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_goals.user_profile_id
[SQL: SELECT learning_goals.id AS learning_goals_id, learning_goals.user_id AS learning_goals_user_id, learning_goals.user_profile_id AS learning_goals_user_profile_id, learning_goals.subject AS learning_goals_subject, learning_goals.skill_area AS learning_goals_skill_area, learning_goals.target_level AS learning_goals_target_level, learning_goals.target_timeframe AS learning_goals_target_timeframe, learning_goals.priority AS learning_goals_priority, learning_goals.status AS learning_goals_status, learning_goals.created_at AS learning_goals_created_at 
FROM learning_goals 
WHERE learning_goals.user_id = ?]
[parameters: (6,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-08 15:59:46,439 - __main__ - INFO - AI路由加载成功
2025-07-08 15:59:47,482 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 15:59:47,584 - main - INFO - AI路由加载成功
2025-07-08 15:59:47,586 - main - INFO - 应用启动中...
2025-07-08 15:59:47,591 - main - INFO - 数据库初始化完成
2025-07-08 15:59:57,506 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:00:23,490 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:03:12,824 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:36:54,578 - __main__ - INFO - AI路由加载成功
2025-07-08 16:36:55,876 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 16:36:55,991 - main - INFO - AI路由加载成功
2025-07-08 16:36:55,994 - main - INFO - 应用启动中...
2025-07-08 16:36:55,997 - main - INFO - 数据库初始化完成
2025-07-08 16:37:05,399 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:39:15,330 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:40:44,481 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:40:50,951 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:40:54,860 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:41:22,589 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:41:24,911 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 16:52:58,244 - app.api.auth - WARNING - Login failed for username: aaa
2025-07-08 16:52:58,253 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:52:59,789 - app.api.auth - WARNING - Login failed for username: aaa
2025-07-08 16:52:59,790 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:03,979 - app.api.auth - WARNING - Login failed for username: aaa
2025-07-08 16:53:04,032 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:04,765 - app.api.auth - WARNING - Login failed for username: aaa
2025-07-08 16:53:04,769 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:04,888 - app.api.auth - WARNING - Login failed for username: aaa
2025-07-08 16:53:04,905 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:05,037 - app.api.auth - WARNING - Login failed for username: aaa
2025-07-08 16:53:05,038 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:05,190 - app.api.auth - WARNING - Login failed for username: aaa
2025-07-08 16:53:05,195 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:05,332 - app.api.auth - WARNING - Login failed for username: aaa
2025-07-08 16:53:05,334 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:16,848 - app.api.auth - WARNING - Login failed for username: testuser
2025-07-08 16:53:16,848 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:20,604 - app.api.auth - WARNING - Login failed for username: admin
2025-07-08 16:53:20,605 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:22,071 - app.api.auth - WARNING - Login failed for username: admin
2025-07-08 16:53:22,071 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:22,832 - app.api.auth - WARNING - Login failed for username: admin
2025-07-08 16:53:22,832 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:23,007 - app.api.auth - WARNING - Login failed for username: admin
2025-07-08 16:53:23,007 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 16:53:23,143 - app.api.auth - WARNING - Login failed for username: admin
2025-07-08 16:53:23,144 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 18:06:51,497 - __main__ - INFO - AI路由加载成功
2025-07-08 18:06:52,756 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 18:06:52,852 - main - INFO - AI路由加载成功
2025-07-08 18:06:52,854 - main - INFO - 应用启动中...
2025-07-08 18:06:52,872 - main - INFO - 数据库初始化完成
2025-07-08 18:41:00,026 - main - INFO - 应用关闭中...
2025-07-08 18:41:02,112 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 18:41:02,231 - main - INFO - AI路由加载成功
2025-07-08 18:41:02,232 - main - INFO - 应用启动中...
2025-07-08 18:41:02,237 - main - INFO - 数据库初始化完成
2025-07-08 18:41:05,835 - main - INFO - 应用关闭中...
2025-07-08 18:41:07,614 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 18:41:07,719 - main - INFO - AI路由加载成功
2025-07-08 18:41:07,720 - main - INFO - 应用启动中...
2025-07-08 18:41:07,725 - main - INFO - 数据库初始化完成
2025-07-08 18:41:21,725 - main - INFO - 应用关闭中...
2025-07-08 18:41:23,125 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 18:41:23,199 - main - INFO - AI路由加载成功
2025-07-08 18:41:23,200 - main - INFO - 应用启动中...
2025-07-08 18:41:23,202 - main - INFO - 数据库初始化完成
2025-07-08 18:41:35,873 - main - INFO - 应用关闭中...
2025-07-08 18:41:37,436 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 18:41:37,500 - main - INFO - AI路由加载成功
2025-07-08 18:41:37,501 - main - INFO - 应用启动中...
2025-07-08 18:41:37,504 - main - INFO - 数据库初始化完成
2025-07-08 18:41:56,616 - main - INFO - 应用关闭中...
2025-07-08 18:41:58,020 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 18:41:58,086 - main - INFO - AI路由加载成功
2025-07-08 18:41:58,087 - main - INFO - 应用启动中...
2025-07-08 18:41:58,090 - main - INFO - 数据库初始化完成
2025-07-08 18:42:05,164 - main - INFO - 应用关闭中...
2025-07-08 18:42:06,629 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 18:42:06,694 - main - INFO - AI路由加载成功
2025-07-08 18:42:06,695 - main - INFO - 应用启动中...
2025-07-08 18:42:06,698 - main - INFO - 数据库初始化完成
2025-07-08 18:46:33,622 - app.api.auth - INFO - User ai_test_user logged in successfully
2025-07-08 18:46:58,152 - main - INFO - 应用关闭中...
2025-07-08 18:47:05,470 - __main__ - INFO - AI路由加载成功
2025-07-08 18:47:07,030 - __mp_main__ - INFO - AI路由加载成功
2025-07-08 18:47:07,098 - main - INFO - AI路由加载成功
2025-07-08 18:47:07,100 - main - INFO - 应用启动中...
2025-07-08 18:47:07,104 - main - INFO - 数据库初始化完成
2025-07-08 18:47:58,322 - app.api.auth - ERROR - Registration error: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('ai_teacher@example.com', 'ai_teacher_user', None, '$2b$12$CNoyx9uBXISv6FWSE58eA.m0L.7FO62YPKAciBnFWvZGRPiwiWgZW', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 10:47:58.321257', '2025-07-08 10:47:58.321257', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: UNIQUE constraint failed: users.username

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 103, in register_user
    user = auth_service.create_user(username=form_data.username,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\services\auth_service.py", line 43, in create_user
    self.db.commit()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: users.username
[SQL: INSERT INTO users (email, username, password, hashed_password, full_name, avatar, phone, bio, is_active, is_verified, is_superuser, role, created_at, updated_at, last_login, study_level, preferred_subjects) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('ai_teacher@example.com', 'ai_teacher_user', None, '$2b$12$CNoyx9uBXISv6FWSE58eA.m0L.7FO62YPKAciBnFWvZGRPiwiWgZW', None, None, None, None, 1, 0, 0, 'student', '2025-07-08 10:47:58.321257', '2025-07-08 10:47:58.321257', None, 'beginner', None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-08 18:48:15,908 - app.api.auth - INFO - User ai_teacher_user logged in successfully
2025-07-08 18:48:18,402 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 18:48:51,976 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 18:49:01,434 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 18:50:57,926 - app.api.auth - WARNING - Login failed for username: test
2025-07-08 18:50:57,928 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 18:51:06,790 - app.api.auth - WARNING - Login failed for username: admin1
2025-07-08 18:51:06,799 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 18:51:13,221 - app.api.auth - WARNING - Login failed for username: test
2025-07-08 18:51:13,238 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-08 18:51:33,026 - app.api.auth - INFO - User ai_teacher_user logged in successfully
2025-07-08 18:51:35,208 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 18:52:07,108 - app.api.auth - INFO - User admin2 logged in successfully
2025-07-08 18:52:09,002 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 18:52:20,648 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 18:52:29,728 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 18:52:51,036 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (3,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (3,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-08 18:52:51,264 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (3,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (3,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-08 18:52:51,286 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (3,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (3,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-08 18:52:52,952 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 18:53:25,964 - httpx - INFO - HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 200 OK"
2025-07-08 19:11:51,764 - __main__ - INFO - AI路由加载成功
2025-07-09 09:08:02,774 - __main__ - INFO - AI路由加载成功
2025-07-09 09:08:06,745 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 09:08:07,159 - main - INFO - AI路由加载成功
2025-07-09 09:08:07,235 - main - INFO - 应用启动中...
2025-07-09 09:08:07,257 - main - INFO - 数据库初始化完成
2025-07-09 09:19:31,607 - main - INFO - 应用关闭中...
2025-07-09 09:19:33,633 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 09:19:33,650 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 09:19:33,735 - main - INFO - AI路由加载成功
2025-07-09 09:19:33,736 - main - INFO - 应用启动中...
2025-07-09 09:19:33,738 - main - INFO - 数据库初始化完成
2025-07-09 09:19:43,869 - main - INFO - 应用关闭中...
2025-07-09 09:19:45,461 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 09:19:45,477 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 09:19:45,528 - main - INFO - AI路由加载成功
2025-07-09 09:19:45,529 - main - INFO - 应用启动中...
2025-07-09 09:19:45,532 - main - INFO - 数据库初始化完成
2025-07-09 09:19:51,494 - main - INFO - 应用关闭中...
2025-07-09 09:19:53,356 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 09:19:53,374 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 09:19:53,460 - main - INFO - AI路由加载成功
2025-07-09 09:19:53,462 - main - INFO - 应用启动中...
2025-07-09 09:19:53,465 - main - INFO - 数据库初始化完成
2025-07-09 09:20:01,869 - main - INFO - 应用关闭中...
2025-07-09 09:20:03,422 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 09:20:03,438 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 09:20:03,488 - main - INFO - AI路由加载成功
2025-07-09 09:20:03,490 - main - INFO - 应用启动中...
2025-07-09 09:20:03,492 - main - INFO - 数据库初始化完成
2025-07-09 09:20:45,078 - main - INFO - 应用关闭中...
2025-07-09 09:20:46,762 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 09:20:46,782 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 09:20:46,858 - main - INFO - AI路由加载成功
2025-07-09 09:20:46,859 - main - INFO - 应用启动中...
2025-07-09 09:20:46,861 - main - INFO - 数据库初始化完成
2025-07-09 09:22:32,141 - main - INFO - 应用关闭中...
2025-07-09 09:22:35,774 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 09:22:35,794 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 09:22:35,951 - main - INFO - AI路由加载成功
2025-07-09 09:22:35,982 - main - INFO - 应用启动中...
2025-07-09 09:22:35,992 - main - INFO - 数据库初始化完成
2025-07-09 10:41:24,410 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:41:24,433 - __main__ - INFO - AI路由加载成功
2025-07-09 10:41:26,128 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:41:26,148 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:41:26,224 - main - INFO - AI路由加载成功
2025-07-09 10:41:26,225 - main - INFO - 应用启动中...
2025-07-09 10:41:26,236 - main - INFO - 数据库初始化完成
2025-07-09 10:48:06,105 - main - INFO - 应用关闭中...
2025-07-09 10:48:06,365 - main - INFO - 应用关闭中...
2025-07-09 10:48:11,793 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:48:11,794 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:48:11,819 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:48:11,825 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:48:12,063 - main - INFO - AI路由加载成功
2025-07-09 10:48:12,066 - main - INFO - AI路由加载成功
2025-07-09 10:48:12,077 - main - INFO - 应用启动中...
2025-07-09 10:48:12,079 - main - INFO - 应用启动中...
2025-07-09 10:48:12,096 - main - INFO - 数据库初始化完成
2025-07-09 10:48:12,099 - main - INFO - 数据库初始化完成
2025-07-09 10:49:21,299 - main - INFO - 应用关闭中...
2025-07-09 10:49:21,373 - main - INFO - 应用关闭中...
2025-07-09 10:49:25,630 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:49:25,640 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:49:25,658 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:49:25,663 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:49:25,838 - main - INFO - AI路由加载成功
2025-07-09 10:49:25,841 - main - INFO - AI路由加载成功
2025-07-09 10:49:25,892 - main - INFO - 应用启动中...
2025-07-09 10:49:25,893 - main - INFO - 应用启动中...
2025-07-09 10:49:25,902 - main - INFO - 数据库初始化完成
2025-07-09 10:49:25,912 - main - INFO - 数据库初始化完成
2025-07-09 10:50:56,972 - main - INFO - 应用关闭中...
2025-07-09 10:50:57,082 - main - INFO - 应用关闭中...
2025-07-09 10:51:00,031 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:51:00,045 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:51:00,073 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:51:00,085 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:51:00,256 - main - INFO - AI路由加载成功
2025-07-09 10:51:00,257 - main - INFO - AI路由加载成功
2025-07-09 10:51:00,394 - main - INFO - 应用启动中...
2025-07-09 10:51:00,396 - main - INFO - 应用启动中...
2025-07-09 10:51:00,417 - main - INFO - 数据库初始化完成
2025-07-09 10:51:00,417 - main - INFO - 数据库初始化完成
2025-07-09 10:52:40,358 - main - INFO - 应用关闭中...
2025-07-09 10:52:41,052 - main - INFO - 应用关闭中...
2025-07-09 10:52:45,779 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:52:45,800 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:52:45,803 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 10:52:45,827 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 10:52:45,875 - main - INFO - AI路由加载成功
2025-07-09 10:52:45,917 - main - INFO - 应用启动中...
2025-07-09 10:52:45,927 - main - INFO - 数据库初始化完成
2025-07-09 10:52:45,949 - main - INFO - AI路由加载成功
2025-07-09 10:52:45,994 - main - INFO - 应用启动中...
2025-07-09 10:52:46,003 - main - INFO - 数据库初始化完成
2025-07-09 11:24:18,370 - main - INFO - 应用关闭中...
2025-07-09 11:24:18,441 - main - INFO - 应用关闭中...
2025-07-09 11:24:22,921 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 11:24:22,939 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 11:24:22,946 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 11:24:22,966 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 11:24:23,091 - main - INFO - AI路由加载成功
2025-07-09 11:24:23,093 - main - INFO - 应用启动中...
2025-07-09 11:24:23,093 - main - INFO - AI路由加载成功
2025-07-09 11:24:23,095 - main - INFO - 应用启动中...
2025-07-09 11:24:23,103 - main - INFO - 数据库初始化完成
2025-07-09 11:24:23,103 - main - INFO - 数据库初始化完成
2025-07-09 11:28:04,994 - main - INFO - 应用关闭中...
2025-07-09 11:28:05,031 - main - INFO - 应用关闭中...
2025-07-09 11:28:08,571 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 11:28:08,575 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 11:28:08,605 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 11:28:08,613 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 11:28:08,727 - main - INFO - AI路由加载成功
2025-07-09 11:28:08,729 - main - INFO - 应用启动中...
2025-07-09 11:28:08,729 - main - INFO - 应用启动中...
2025-07-09 11:28:08,738 - main - INFO - 数据库初始化完成
2025-07-09 11:28:08,740 - main - INFO - 数据库初始化完成
2025-07-09 11:59:41,310 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 11:59:41,332 - __main__ - INFO - AI路由加载成功
2025-07-09 11:59:43,239 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 11:59:43,262 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 11:59:43,363 - main - INFO - AI路由加载成功
2025-07-09 11:59:43,365 - main - INFO - 应用启动中...
2025-07-09 11:59:43,375 - main - INFO - 数据库初始化完成
2025-07-09 12:02:03,381 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:02:03,402 - __main__ - INFO - AI路由加载成功
2025-07-09 12:02:05,307 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:02:05,326 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:02:05,397 - main - INFO - AI路由加载成功
2025-07-09 12:02:05,398 - main - INFO - 应用启动中...
2025-07-09 12:02:05,401 - main - INFO - 数据库初始化完成
2025-07-09 12:06:31,788 - main - INFO - 应用关闭中...
2025-07-09 12:06:31,828 - main - INFO - 应用关闭中...
2025-07-09 12:06:34,772 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:06:34,774 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:06:34,805 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:06:34,806 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:06:34,929 - main - INFO - AI路由加载成功
2025-07-09 12:06:34,931 - main - INFO - 应用启动中...
2025-07-09 12:06:34,935 - main - INFO - 数据库初始化完成
2025-07-09 12:06:34,936 - main - INFO - AI路由加载成功
2025-07-09 12:06:34,937 - main - INFO - 应用启动中...
2025-07-09 12:06:34,941 - main - INFO - 数据库初始化完成
2025-07-09 12:06:40,432 - main - INFO - 应用关闭中...
2025-07-09 12:06:40,542 - main - INFO - 应用关闭中...
2025-07-09 12:06:42,790 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:06:42,830 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:06:42,909 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:06:42,924 - main - INFO - AI路由加载成功
2025-07-09 12:06:42,926 - main - INFO - 应用启动中...
2025-07-09 12:06:42,929 - main - INFO - 数据库初始化完成
2025-07-09 12:06:42,935 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:06:43,056 - main - INFO - AI路由加载成功
2025-07-09 12:06:43,058 - main - INFO - 应用启动中...
2025-07-09 12:06:43,062 - main - INFO - 数据库初始化完成
2025-07-09 12:06:48,300 - main - INFO - 应用关闭中...
2025-07-09 12:06:48,443 - main - INFO - 应用关闭中...
2025-07-09 12:06:50,646 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:06:50,677 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:06:50,758 - main - INFO - AI路由加载成功
2025-07-09 12:06:50,759 - main - INFO - 应用启动中...
2025-07-09 12:06:50,763 - main - INFO - 数据库初始化完成
2025-07-09 12:06:50,768 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:06:50,788 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:06:50,892 - main - INFO - AI路由加载成功
2025-07-09 12:06:50,894 - main - INFO - 应用启动中...
2025-07-09 12:06:50,900 - main - INFO - 数据库初始化完成
2025-07-09 12:06:54,512 - main - INFO - 应用关闭中...
2025-07-09 12:06:54,607 - main - INFO - 应用关闭中...
2025-07-09 12:06:56,788 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:06:56,813 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:06:56,878 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:06:56,899 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:06:56,899 - main - INFO - AI路由加载成功
2025-07-09 12:06:56,901 - main - INFO - 应用启动中...
2025-07-09 12:06:56,904 - main - INFO - 数据库初始化完成
2025-07-09 12:06:56,993 - main - INFO - AI路由加载成功
2025-07-09 12:06:56,996 - main - INFO - 应用启动中...
2025-07-09 12:06:57,002 - main - INFO - 数据库初始化完成
2025-07-09 12:07:51,659 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:07:51,660 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:07:53,813 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:07:53,814 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:08:00,433 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:08:00,494 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:08:13,021 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:08:13,026 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:10:32,119 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:10:32,119 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:10:32,949 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:10:32,949 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:10:33,117 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:10:33,117 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:10:33,279 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:10:33,279 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:10:33,434 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:10:33,435 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:17:02,430 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:17:02,463 - __main__ - INFO - AI路由加载成功
2025-07-09 12:17:03,870 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:17:03,895 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:17:03,967 - main - INFO - AI路由加载成功
2025-07-09 12:17:03,969 - main - INFO - 应用启动中...
2025-07-09 12:17:03,977 - main - INFO - 数据库初始化完成
2025-07-09 12:20:28,215 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:20:28,216 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:22:08,055 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:22:08,057 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:25:57,135 - main - INFO - 应用关闭中...
2025-07-09 12:25:59,806 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:25:59,825 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:25:59,911 - main - INFO - AI路由加载成功
2025-07-09 12:25:59,913 - main - INFO - 应用启动中...
2025-07-09 12:25:59,919 - main - INFO - 数据库初始化完成
2025-07-09 12:26:02,445 - main - INFO - 应用关闭中...
2025-07-09 12:26:04,568 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:26:04,592 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:26:04,682 - main - INFO - AI路由加载成功
2025-07-09 12:26:04,684 - main - INFO - 应用启动中...
2025-07-09 12:26:04,690 - main - INFO - 数据库初始化完成
2025-07-09 12:26:13,039 - main - INFO - 应用关闭中...
2025-07-09 12:26:14,991 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:26:15,014 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:26:15,096 - main - INFO - AI路由加载成功
2025-07-09 12:26:15,098 - main - INFO - 应用启动中...
2025-07-09 12:26:15,101 - main - INFO - 数据库初始化完成
2025-07-09 12:26:21,797 - main - INFO - 应用关闭中...
2025-07-09 12:26:24,415 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:26:24,441 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:26:24,525 - main - INFO - AI路由加载成功
2025-07-09 12:26:24,527 - main - INFO - 应用启动中...
2025-07-09 12:26:24,531 - main - INFO - 数据库初始化完成
2025-07-09 12:29:33,189 - app.api.auth - WARNING - Login failed for username: admin2
2025-07-09 12:29:33,190 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 12:30:24,496 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 12:31:22,384 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:31:22,406 - __main__ - INFO - AI路由加载成功
2025-07-09 12:31:24,300 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:31:24,322 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:31:24,417 - main - INFO - AI路由加载成功
2025-07-09 12:31:24,418 - main - INFO - 应用启动中...
2025-07-09 12:31:24,421 - main - INFO - 数据库初始化完成
2025-07-09 12:31:27,169 - main - INFO - 应用关闭中...
2025-07-09 12:31:28,029 - main - INFO - 应用关闭中...
2025-07-09 12:31:30,034 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:31:30,054 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:31:30,142 - main - INFO - AI路由加载成功
2025-07-09 12:31:30,143 - main - INFO - 应用启动中...
2025-07-09 12:31:30,146 - main - INFO - 数据库初始化完成
2025-07-09 12:31:34,261 - main - ERROR - 未处理的异常: type object 'LearningTask' has no attribute 'user_id'
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 344, in get_learning_tasks
    tasks = db.query(LearningTask).filter(LearningTask.user_id == current_user.id).all()
                                          ^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'LearningTask' has no attribute 'user_id'
2025-07-09 12:31:35,961 - main - INFO - 应用关闭中...
2025-07-09 12:31:38,155 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:31:38,175 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:31:38,245 - main - INFO - AI路由加载成功
2025-07-09 12:31:38,378 - main - INFO - 应用启动中...
2025-07-09 12:31:38,542 - main - INFO - 数据库初始化完成
2025-07-09 12:31:43,578 - main - ERROR - 未处理的异常: type object 'LearningTask' has no attribute 'user_id'
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 344, in get_learning_tasks
    tasks = db.query(LearningTask).filter(LearningTask.user_id == current_user.id).all()
                                          ^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'LearningTask' has no attribute 'user_id'
2025-07-09 12:31:51,075 - app.services.ai_service - ERROR - 学习风格分析失败: invalid literal for int() with base 10: '下午'
2025-07-09 12:32:02,963 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:32:03,009 - __main__ - INFO - AI路由加载成功
2025-07-09 12:32:05,777 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 12:32:05,797 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 12:32:05,869 - main - INFO - AI路由加载成功
2025-07-09 12:32:05,873 - main - INFO - 应用启动中...
2025-07-09 12:32:05,877 - main - INFO - 数据库初始化完成
2025-07-09 13:19:00,939 - main - INFO - 应用关闭中...
2025-07-09 13:19:03,250 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 13:19:03,278 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 13:19:03,378 - main - INFO - AI路由加载成功
2025-07-09 13:19:03,379 - main - INFO - 应用启动中...
2025-07-09 13:19:03,382 - main - INFO - 数据库初始化完成
2025-07-09 13:20:18,628 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 13:20:18,649 - __main__ - INFO - AI路由加载成功
2025-07-09 13:20:20,456 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 13:20:20,481 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 13:20:20,557 - main - INFO - AI路由加载成功
2025-07-09 13:20:20,558 - main - INFO - 应用启动中...
2025-07-09 13:20:20,561 - main - INFO - 数据库初始化完成
2025-07-09 13:20:51,004 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 13:21:08,678 - app.services.ai_service - ERROR - 学习风格分析失败: invalid literal for int() with base 10: '下午'
2025-07-09 13:21:24,131 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 13:21:44,654 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 13:35:46,170 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 13:40:36,855 - app.services.ai_service - ERROR - 学习风格分析失败: invalid literal for int() with base 10: '下午'
2025-07-09 13:40:47,495 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 13:58:26,473 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 13:58:28,156 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:03:56,069 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:03:59,831 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:10:36,093 - main - INFO - 应用关闭中...
2025-07-09 14:10:46,623 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:10:46,676 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:10:47,105 - main - INFO - AI路由加载成功
2025-07-09 14:10:47,133 - main - INFO - 应用启动中...
2025-07-09 14:10:47,217 - main - INFO - 数据库初始化完成
2025-07-09 14:14:15,119 - main - INFO - 应用关闭中...
2025-07-09 14:14:18,021 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:14:18,042 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:14:18,136 - main - INFO - AI路由加载成功
2025-07-09 14:14:18,139 - main - INFO - 应用启动中...
2025-07-09 14:14:18,143 - main - INFO - 数据库初始化完成
2025-07-09 14:14:47,771 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:15:26,432 - main - INFO - 应用关闭中...
2025-07-09 14:15:28,417 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:15:28,437 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:15:28,535 - main - INFO - AI路由加载成功
2025-07-09 14:15:28,538 - main - INFO - 应用启动中...
2025-07-09 14:15:28,551 - main - INFO - 数据库初始化完成
2025-07-09 14:15:35,732 - main - INFO - 应用关闭中...
2025-07-09 14:15:37,791 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:15:37,815 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:15:37,894 - main - INFO - AI路由加载成功
2025-07-09 14:15:37,895 - main - INFO - 应用启动中...
2025-07-09 14:15:37,899 - main - INFO - 数据库初始化完成
2025-07-09 14:15:40,657 - main - INFO - 应用关闭中...
2025-07-09 14:15:42,641 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:15:42,663 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:15:42,761 - main - INFO - AI路由加载成功
2025-07-09 14:15:42,761 - main - INFO - 应用启动中...
2025-07-09 14:15:42,766 - main - INFO - 数据库初始化完成
2025-07-09 14:15:45,083 - main - INFO - 应用关闭中...
2025-07-09 14:15:47,069 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:15:47,097 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:15:47,183 - main - INFO - AI路由加载成功
2025-07-09 14:15:47,186 - main - INFO - 应用启动中...
2025-07-09 14:15:47,189 - main - INFO - 数据库初始化完成
2025-07-09 14:16:34,737 - main - INFO - 应用关闭中...
2025-07-09 14:16:43,666 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:16:43,692 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:16:43,933 - main - INFO - AI路由加载成功
2025-07-09 14:16:43,962 - main - INFO - 应用启动中...
2025-07-09 14:16:43,985 - main - INFO - 数据库初始化完成
2025-07-09 14:16:54,980 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:17:11,024 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:17:15,208 - main - INFO - 应用关闭中...
2025-07-09 14:17:28,955 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:17:29,326 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:17:29,376 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:17:29,713 - main - INFO - 题库路由加载成功
2025-07-09 14:17:29,730 - main - INFO - AI路由加载成功
2025-07-09 14:17:29,953 - main - INFO - 应用启动中...
2025-07-09 14:17:30,101 - main - INFO - 数据库初始化完成
2025-07-09 14:17:30,435 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:17:30,657 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:17:30,941 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:17:31,203 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:17:31,251 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:17:45,261 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:18:05,314 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:18:09,433 - app.services.ai_service - ERROR - 学习风格分析失败: invalid literal for int() with base 10: '下午'
2025-07-09 14:18:11,546 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:18:13,258 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:47:01,474 - __main__ - INFO - 题库路由加载成功
2025-07-09 14:47:01,790 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:47:01,818 - __main__ - INFO - AI路由加载成功
2025-07-09 14:47:03,505 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:47:03,801 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:47:03,832 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:47:03,935 - main - INFO - 题库路由加载成功
2025-07-09 14:47:03,949 - main - INFO - AI路由加载成功
2025-07-09 14:47:03,951 - main - INFO - 应用启动中...
2025-07-09 14:47:03,964 - main - INFO - 数据库初始化完成
2025-07-09 14:47:26,787 - __main__ - INFO - 题库路由加载成功
2025-07-09 14:47:26,986 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:47:27,005 - __main__ - INFO - AI路由加载成功
2025-07-09 14:47:28,531 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:47:28,735 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:47:28,755 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:47:28,826 - main - INFO - 题库路由加载成功
2025-07-09 14:47:28,838 - main - INFO - AI路由加载成功
2025-07-09 14:47:28,839 - main - INFO - 应用启动中...
2025-07-09 14:47:28,842 - main - INFO - 数据库初始化完成
2025-07-09 14:48:35,226 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:38,570 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:42,824 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 14:48:43,912 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:44,368 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:45,434 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:46,046 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:46,373 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:47,581 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:48,317 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:48,632 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:48,915 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:49,316 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:49,547 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:49,914 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:50,146 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:48:57,215 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:49:07,645 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:50:27,156 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 14:50:50,380 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 14:51:31,711 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) table learning_plans has no column named user_profile_id
[SQL: INSERT INTO learning_plans (user_id, user_profile_id, plan_type, title, description, start_date, end_date, status, ai_generated) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at]
[parameters: (12, None, <PlanType.SHORT_TERM: 'short_term'>, '测试学习计划', '这是一个测试计划', '2024-01-01', '2024-12-31', 'active', 1)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table learning_plans has no column named user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 233, in create_learning_plan
    db.commit()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table learning_plans has no column named user_profile_id
[SQL: INSERT INTO learning_plans (user_id, user_profile_id, plan_type, title, description, start_date, end_date, status, ai_generated) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at]
[parameters: (12, None, <PlanType.SHORT_TERM: 'short_term'>, '测试学习计划', '这是一个测试计划', '2024-01-01', '2024-12-31', 'active', 1)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:51:47,817 - main - INFO - 应用关闭中...
2025-07-09 14:51:49,773 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:51:50,035 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:51:50,055 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:51:50,143 - main - INFO - 题库路由加载成功
2025-07-09 14:51:50,153 - main - INFO - AI路由加载成功
2025-07-09 14:51:50,154 - main - INFO - 应用启动中...
2025-07-09 14:51:50,158 - main - INFO - 数据库初始化完成
2025-07-09 14:51:52,497 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) table learning_plans has no column named user_profile_id
[SQL: INSERT INTO learning_plans (user_id, user_profile_id, plan_type, title, description, start_date, end_date, status, ai_generated) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at]
[parameters: (12, None, 'short_term', '测试计划', '用于测试的计划', '2025-07-09', '2025-07-16', 'active', 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table learning_plans has no column named user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 580, in create_test_task
    db.flush()  # 获取plan.id
    ^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table learning_plans has no column named user_profile_id
[SQL: INSERT INTO learning_plans (user_id, user_profile_id, plan_type, title, description, start_date, end_date, status, ai_generated) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at]
[parameters: (12, None, 'short_term', '测试计划', '用于测试的计划', '2025-07-09', '2025-07-16', 'active', 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:52:12,820 - main - INFO - 应用关闭中...
2025-07-09 14:52:14,641 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:52:14,866 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:52:14,887 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:52:14,965 - main - INFO - 题库路由加载成功
2025-07-09 14:52:14,975 - main - INFO - AI路由加载成功
2025-07-09 14:52:14,976 - main - INFO - 应用启动中...
2025-07-09 14:52:14,984 - main - INFO - 数据库初始化完成
2025-07-09 14:52:39,038 - main - INFO - 应用关闭中...
2025-07-09 14:52:41,099 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:52:41,349 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:52:41,382 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:52:41,461 - main - INFO - 题库路由加载成功
2025-07-09 14:52:41,475 - main - INFO - AI路由加载成功
2025-07-09 14:52:41,476 - main - INFO - 应用启动中...
2025-07-09 14:52:41,480 - main - INFO - 数据库初始化完成
2025-07-09 14:52:54,687 - main - INFO - 应用关闭中...
2025-07-09 14:52:56,484 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:52:56,707 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:52:56,726 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:52:56,809 - main - INFO - 题库路由加载成功
2025-07-09 14:52:56,817 - main - INFO - AI路由加载成功
2025-07-09 14:52:56,819 - main - INFO - 应用启动中...
2025-07-09 14:52:56,823 - main - INFO - 数据库初始化完成
2025-07-09 14:53:03,661 - main - INFO - 应用关闭中...
2025-07-09 14:53:05,791 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:53:06,090 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:53:06,123 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:53:06,234 - main - INFO - 题库路由加载成功
2025-07-09 14:53:06,250 - main - INFO - AI路由加载成功
2025-07-09 14:53:06,252 - main - INFO - 应用启动中...
2025-07-09 14:53:06,257 - main - INFO - 数据库初始化完成
2025-07-09 14:53:16,159 - main - INFO - 应用关闭中...
2025-07-09 14:53:17,897 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:53:18,138 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:53:18,162 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:53:18,262 - main - INFO - 题库路由加载成功
2025-07-09 14:53:18,276 - main - INFO - AI路由加载成功
2025-07-09 14:53:18,278 - main - INFO - 应用启动中...
2025-07-09 14:53:18,285 - main - INFO - 数据库初始化完成
2025-07-09 14:55:35,776 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 14:55:44,592 - main - INFO - 应用关闭中...
2025-07-09 14:56:10,089 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:56:10,276 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:56:10,301 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:56:10,380 - main - INFO - 题库路由加载成功
2025-07-09 14:56:10,388 - main - INFO - AI路由加载成功
2025-07-09 14:56:10,390 - main - INFO - 应用启动中...
2025-07-09 14:56:10,393 - main - INFO - 数据库初始化完成
2025-07-09 14:56:27,375 - main - INFO - 应用关闭中...
2025-07-09 14:56:29,685 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:56:29,880 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:56:29,909 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:56:29,989 - main - INFO - 题库路由加载成功
2025-07-09 14:56:29,999 - main - INFO - AI路由加载成功
2025-07-09 14:56:30,000 - main - INFO - 应用启动中...
2025-07-09 14:56:30,005 - main - INFO - 数据库初始化完成
2025-07-09 14:57:15,515 - main - INFO - 应用关闭中...
2025-07-09 14:57:17,439 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:57:17,661 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:57:17,688 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:57:17,777 - main - INFO - 题库路由加载成功
2025-07-09 14:57:17,785 - main - INFO - AI路由加载成功
2025-07-09 14:57:17,786 - main - INFO - 应用启动中...
2025-07-09 14:57:17,795 - main - INFO - 数据库初始化完成
2025-07-09 14:57:31,972 - main - INFO - 应用关闭中...
2025-07-09 14:57:34,237 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 14:57:34,244 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 14:57:34,504 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 14:57:34,533 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 14:57:34,660 - main - INFO - 题库路由加载成功
2025-07-09 14:57:34,664 - main - INFO - 分析路由加载成功
2025-07-09 14:57:34,678 - main - INFO - AI路由加载成功
2025-07-09 14:57:34,679 - main - INFO - 应用启动中...
2025-07-09 14:57:34,685 - main - INFO - 数据库初始化完成
2025-07-09 15:00:02,920 - __main__ - INFO - 题库路由加载成功
2025-07-09 15:00:02,928 - __main__ - INFO - 分析路由加载成功
2025-07-09 15:00:03,204 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:00:03,247 - __main__ - INFO - AI路由加载成功
2025-07-09 15:00:05,966 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:00:05,971 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:00:06,240 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:00:06,276 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:00:06,385 - main - INFO - 题库路由加载成功
2025-07-09 15:00:06,387 - main - INFO - 分析路由加载成功
2025-07-09 15:00:06,397 - main - INFO - AI路由加载成功
2025-07-09 15:00:06,399 - main - INFO - 应用启动中...
2025-07-09 15:00:06,404 - main - INFO - 数据库初始化完成
2025-07-09 15:14:54,400 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 15:14:59,683 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 15:16:34,628 - main - INFO - 应用关闭中...
2025-07-09 15:16:34,701 - main - INFO - 应用关闭中...
2025-07-09 15:16:37,288 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:16:37,288 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:16:37,298 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:16:37,299 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:16:37,586 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:16:37,591 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:16:37,610 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:16:37,614 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:16:37,707 - main - INFO - 题库路由加载成功
2025-07-09 15:16:37,708 - main - INFO - 题库路由加载成功
2025-07-09 15:16:37,710 - main - INFO - 分析路由加载成功
2025-07-09 15:16:37,710 - main - INFO - 分析路由加载成功
2025-07-09 15:16:37,722 - main - INFO - AI路由加载成功
2025-07-09 15:16:37,722 - main - INFO - AI路由加载成功
2025-07-09 15:16:37,723 - main - INFO - 应用启动中...
2025-07-09 15:16:37,724 - main - INFO - 应用启动中...
2025-07-09 15:16:37,730 - main - INFO - 数据库初始化完成
2025-07-09 15:16:37,736 - main - INFO - 数据库初始化完成
2025-07-09 15:16:51,849 - main - INFO - 应用关闭中...
2025-07-09 15:16:51,958 - main - INFO - 应用关闭中...
2025-07-09 15:16:53,992 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:16:54,000 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:16:54,080 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:16:54,083 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:16:54,239 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:16:54,264 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:16:54,316 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:16:54,340 - main - INFO - 题库路由加载成功
2025-07-09 15:16:54,342 - main - INFO - 分析路由加载成功
2025-07-09 15:16:54,345 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:16:54,351 - main - INFO - AI路由加载成功
2025-07-09 15:16:54,353 - main - INFO - 应用启动中...
2025-07-09 15:16:54,360 - main - INFO - 数据库初始化完成
2025-07-09 15:16:54,426 - main - INFO - 题库路由加载成功
2025-07-09 15:16:54,428 - main - INFO - 分析路由加载成功
2025-07-09 15:16:54,442 - main - INFO - AI路由加载成功
2025-07-09 15:16:54,443 - main - INFO - 应用启动中...
2025-07-09 15:16:54,446 - main - INFO - 数据库初始化完成
2025-07-09 15:17:00,779 - __main__ - INFO - 题库路由加载成功
2025-07-09 15:17:00,784 - __main__ - INFO - 分析路由加载成功
2025-07-09 15:17:00,978 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:17:01,000 - __main__ - INFO - AI路由加载成功
2025-07-09 15:17:02,911 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:17:02,917 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:17:03,326 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:17:03,350 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:17:03,455 - main - INFO - 题库路由加载成功
2025-07-09 15:17:03,457 - main - INFO - 分析路由加载成功
2025-07-09 15:17:03,465 - main - INFO - AI路由加载成功
2025-07-09 15:17:03,467 - main - INFO - 应用启动中...
2025-07-09 15:17:03,471 - main - INFO - 数据库初始化完成
2025-07-09 15:17:33,637 - main - INFO - 应用关闭中...
2025-07-09 15:17:33,699 - main - INFO - 应用关闭中...
2025-07-09 15:17:33,715 - main - INFO - 应用关闭中...
2025-07-09 15:17:35,896 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:17:35,902 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:17:35,953 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:17:35,957 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:17:35,973 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:17:35,982 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:17:36,244 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:17:36,268 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:17:36,309 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:17:36,338 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:17:36,341 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:17:36,382 - main - INFO - 题库路由加载成功
2025-07-09 15:17:36,384 - main - INFO - 分析路由加载成功
2025-07-09 15:17:36,393 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:17:36,396 - main - INFO - AI路由加载成功
2025-07-09 15:17:36,397 - main - INFO - 应用启动中...
2025-07-09 15:17:36,402 - main - INFO - 数据库初始化完成
2025-07-09 15:17:36,442 - main - INFO - 题库路由加载成功
2025-07-09 15:17:36,443 - main - INFO - 分析路由加载成功
2025-07-09 15:17:36,450 - main - INFO - AI路由加载成功
2025-07-09 15:17:36,452 - main - INFO - 应用启动中...
2025-07-09 15:17:36,456 - main - INFO - 数据库初始化完成
2025-07-09 15:17:36,470 - main - INFO - 题库路由加载成功
2025-07-09 15:17:36,472 - main - INFO - 分析路由加载成功
2025-07-09 15:17:36,480 - main - INFO - AI路由加载成功
2025-07-09 15:17:36,481 - main - INFO - 应用启动中...
2025-07-09 15:17:36,487 - main - INFO - 数据库初始化完成
2025-07-09 15:18:15,200 - main - INFO - 应用关闭中...
2025-07-09 15:18:15,248 - main - INFO - 应用关闭中...
2025-07-09 15:18:15,281 - main - INFO - 应用关闭中...
2025-07-09 15:18:17,440 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:18:17,448 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:18:17,469 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:18:17,473 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 15:18:17,480 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:18:17,480 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 15:18:17,739 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:18:17,765 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:18:17,768 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:18:17,780 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 15:18:17,811 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:18:17,819 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 15:18:17,871 - main - INFO - 题库路由加载成功
2025-07-09 15:18:17,873 - main - INFO - 分析路由加载成功
2025-07-09 15:18:17,881 - main - INFO - AI路由加载成功
2025-07-09 15:18:17,882 - main - INFO - 应用启动中...
2025-07-09 15:18:17,889 - main - INFO - 数据库初始化完成
2025-07-09 15:18:17,900 - main - INFO - 题库路由加载成功
2025-07-09 15:18:17,902 - main - INFO - 分析路由加载成功
2025-07-09 15:18:17,907 - main - INFO - 题库路由加载成功
2025-07-09 15:18:17,909 - main - INFO - 分析路由加载成功
2025-07-09 15:18:17,909 - main - INFO - AI路由加载成功
2025-07-09 15:18:17,910 - main - INFO - 应用启动中...
2025-07-09 15:18:17,913 - main - INFO - 数据库初始化完成
2025-07-09 15:18:17,918 - main - INFO - AI路由加载成功
2025-07-09 15:18:17,920 - main - INFO - 应用启动中...
2025-07-09 15:18:17,924 - main - INFO - 数据库初始化完成
2025-07-09 16:01:34,644 - main - INFO - 应用关闭中...
2025-07-09 16:01:34,683 - main - INFO - 应用关闭中...
2025-07-09 16:01:34,803 - main - INFO - 应用关闭中...
2025-07-09 16:01:37,642 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:01:37,645 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:01:37,647 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:01:37,654 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:01:37,655 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:01:37,662 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:01:38,025 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:01:38,025 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:01:38,043 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:01:38,050 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:01:38,063 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:01:38,090 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:01:38,177 - main - INFO - 题库路由加载成功
2025-07-09 16:01:38,179 - main - INFO - 分析路由加载成功
2025-07-09 16:01:38,186 - main - INFO - 题库路由加载成功
2025-07-09 16:01:38,188 - main - INFO - 分析路由加载成功
2025-07-09 16:01:38,190 - main - INFO - AI路由加载成功
2025-07-09 16:01:38,191 - main - INFO - 题库路由加载成功
2025-07-09 16:01:38,192 - main - INFO - 应用启动中...
2025-07-09 16:01:38,193 - main - INFO - 分析路由加载成功
2025-07-09 16:01:38,196 - main - INFO - 数据库初始化完成
2025-07-09 16:01:38,198 - main - INFO - AI路由加载成功
2025-07-09 16:01:38,200 - main - INFO - 应用启动中...
2025-07-09 16:01:38,206 - main - INFO - 数据库初始化完成
2025-07-09 16:01:38,206 - main - INFO - AI路由加载成功
2025-07-09 16:01:38,207 - main - INFO - 应用启动中...
2025-07-09 16:01:38,212 - main - INFO - 数据库初始化完成
2025-07-09 16:01:52,089 - main - INFO - 应用关闭中...
2025-07-09 16:01:54,703 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:01:54,708 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:01:54,708 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:01:54,712 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:01:54,718 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:01:55,080 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:01:55,089 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:01:55,090 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:01:55,107 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:01:55,115 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:01:55,118 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:01:55,205 - main - INFO - 题库路由加载成功
2025-07-09 16:01:55,208 - main - INFO - 分析路由加载成功
2025-07-09 16:01:55,222 - main - INFO - AI路由加载成功
2025-07-09 16:01:55,223 - main - INFO - 应用启动中...
2025-07-09 16:01:55,227 - main - INFO - 数据库初始化完成
2025-07-09 16:01:55,234 - main - INFO - 题库路由加载成功
2025-07-09 16:01:55,236 - main - INFO - 分析路由加载成功
2025-07-09 16:01:55,237 - main - INFO - 分析路由加载成功
2025-07-09 16:01:55,245 - main - INFO - AI路由加载成功
2025-07-09 16:01:55,246 - main - INFO - 应用启动中...
2025-07-09 16:01:55,247 - main - INFO - AI路由加载成功
2025-07-09 16:01:55,248 - main - INFO - 应用启动中...
2025-07-09 16:01:55,252 - main - INFO - 数据库初始化完成
2025-07-09 16:01:55,258 - main - INFO - 数据库初始化完成
2025-07-09 16:05:58,352 - __main__ - INFO - 题库路由加载成功
2025-07-09 16:05:58,358 - __main__ - INFO - 分析路由加载成功
2025-07-09 16:05:58,563 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:05:58,584 - __main__ - INFO - AI路由加载成功
2025-07-09 16:06:00,546 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:06:00,565 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:06:00,935 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:06:00,959 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:06:01,067 - main - INFO - 题库路由加载成功
2025-07-09 16:06:01,068 - main - INFO - 分析路由加载成功
2025-07-09 16:06:01,079 - main - INFO - AI路由加载成功
2025-07-09 16:06:01,080 - main - INFO - 应用启动中...
2025-07-09 16:06:01,084 - main - INFO - 数据库初始化完成
2025-07-09 16:06:16,313 - main - INFO - 应用关闭中...
2025-07-09 16:06:16,315 - main - INFO - 应用关闭中...
2025-07-09 16:06:16,389 - main - INFO - 应用关闭中...
2025-07-09 16:06:19,498 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:06:19,503 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:06:19,507 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:06:19,510 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:06:19,652 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:06:19,656 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:06:19,935 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:06:19,940 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:06:19,974 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:06:19,976 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:06:20,049 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:06:20,084 - main - INFO - 题库路由加载成功
2025-07-09 16:06:20,087 - main - INFO - 分析路由加载成功
2025-07-09 16:06:20,090 - main - INFO - 题库路由加载成功
2025-07-09 16:06:20,093 - main - INFO - 分析路由加载成功
2025-07-09 16:06:20,094 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:06:20,103 - main - INFO - AI路由加载成功
2025-07-09 16:06:20,105 - main - INFO - 应用启动中...
2025-07-09 16:06:20,106 - main - INFO - AI路由加载成功
2025-07-09 16:06:20,108 - main - INFO - 应用启动中...
2025-07-09 16:06:20,110 - main - INFO - 数据库初始化完成
2025-07-09 16:06:20,112 - main - INFO - 数据库初始化完成
2025-07-09 16:06:20,213 - main - INFO - 题库路由加载成功
2025-07-09 16:06:20,215 - main - INFO - 分析路由加载成功
2025-07-09 16:06:20,225 - main - INFO - AI路由加载成功
2025-07-09 16:06:20,226 - main - INFO - 应用启动中...
2025-07-09 16:06:20,230 - main - INFO - 数据库初始化完成
2025-07-09 16:07:07,728 - main - INFO - 应用关闭中...
2025-07-09 16:07:07,865 - main - INFO - 应用关闭中...
2025-07-09 16:07:11,298 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:07:11,310 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:07:11,352 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:07:11,359 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:07:11,683 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:07:11,722 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:07:11,727 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:07:11,758 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:07:11,839 - main - INFO - 题库路由加载成功
2025-07-09 16:07:11,842 - main - INFO - 分析路由加载成功
2025-07-09 16:07:11,862 - main - INFO - AI路由加载成功
2025-07-09 16:07:11,865 - main - INFO - 应用启动中...
2025-07-09 16:07:11,870 - main - INFO - 数据库初始化完成
2025-07-09 16:07:11,877 - main - INFO - 题库路由加载成功
2025-07-09 16:07:11,879 - main - INFO - 分析路由加载成功
2025-07-09 16:07:11,888 - main - INFO - AI路由加载成功
2025-07-09 16:07:11,890 - main - INFO - 应用启动中...
2025-07-09 16:07:11,894 - main - INFO - 数据库初始化完成
2025-07-09 16:07:42,336 - main - INFO - 应用关闭中...
2025-07-09 16:07:43,303 - main - INFO - 应用关闭中...
2025-07-09 16:08:02,379 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:08:02,388 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:08:02,905 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:08:02,954 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:08:03,143 - main - INFO - 题库路由加载成功
2025-07-09 16:08:03,147 - main - INFO - 分析路由加载成功
2025-07-09 16:08:03,159 - main - INFO - AI路由加载成功
2025-07-09 16:08:03,160 - main - INFO - 应用启动中...
2025-07-09 16:08:03,174 - main - INFO - 数据库初始化完成
2025-07-09 16:08:03,614 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:08:03,620 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:08:03,902 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:08:03,930 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:08:04,051 - main - INFO - 题库路由加载成功
2025-07-09 16:08:04,056 - main - INFO - 分析路由加载成功
2025-07-09 16:08:04,064 - main - INFO - AI路由加载成功
2025-07-09 16:08:04,065 - main - INFO - 应用启动中...
2025-07-09 16:08:04,071 - main - INFO - 数据库初始化完成
2025-07-09 16:08:13,590 - main - INFO - 应用关闭中...
2025-07-09 16:08:13,620 - main - INFO - 应用关闭中...
2025-07-09 16:08:16,522 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:08:16,526 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:08:16,533 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:08:16,538 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:08:16,988 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:08:16,999 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:08:17,021 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:08:17,030 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:08:17,132 - main - INFO - 题库路由加载成功
2025-07-09 16:08:17,134 - main - INFO - 分析路由加载成功
2025-07-09 16:08:17,140 - main - INFO - 题库路由加载成功
2025-07-09 16:08:17,142 - main - INFO - 分析路由加载成功
2025-07-09 16:08:17,145 - main - INFO - AI路由加载成功
2025-07-09 16:08:17,146 - main - INFO - 应用启动中...
2025-07-09 16:08:17,154 - main - INFO - 数据库初始化完成
2025-07-09 16:08:17,156 - main - INFO - AI路由加载成功
2025-07-09 16:08:17,158 - main - INFO - 应用启动中...
2025-07-09 16:08:17,171 - main - INFO - 数据库初始化完成
2025-07-09 16:08:22,459 - app.api.auth - INFO - User teacher1 logged in successfully
2025-07-09 16:08:30,360 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 16:08:52,201 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 16:08:57,914 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 16:09:19,761 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 16:24:59,577 - __main__ - INFO - 题库路由加载成功
2025-07-09 16:24:59,583 - __main__ - INFO - 分析路由加载成功
2025-07-09 16:24:59,825 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:24:59,847 - __main__ - INFO - AI路由加载成功
2025-07-09 16:25:03,632 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 16:25:03,638 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 16:25:03,902 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 16:25:03,936 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 16:25:04,064 - main - INFO - 题库路由加载成功
2025-07-09 16:25:04,066 - main - INFO - 分析路由加载成功
2025-07-09 16:25:04,078 - main - INFO - AI路由加载成功
2025-07-09 16:25:04,079 - main - INFO - 应用启动中...
2025-07-09 16:25:04,100 - main - INFO - 数据库初始化完成
2025-07-09 17:26:14,176 - __main__ - INFO - 题库路由加载成功
2025-07-09 17:26:14,183 - __main__ - INFO - 分析路由加载成功
2025-07-09 17:26:14,428 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 17:26:14,456 - __main__ - INFO - AI路由加载成功
2025-07-09 17:26:16,953 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 17:26:16,957 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 17:26:17,209 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 17:26:17,237 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 17:26:17,325 - main - INFO - 题库路由加载成功
2025-07-09 17:26:17,327 - main - INFO - 分析路由加载成功
2025-07-09 17:26:17,336 - main - INFO - AI路由加载成功
2025-07-09 17:26:17,338 - main - INFO - 应用启动中...
2025-07-09 17:26:17,359 - main - INFO - 数据库初始化完成
2025-07-09 17:26:31,204 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:27:02,598 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 17:27:04,431 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:27:05,531 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:27:08,645 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:27:08,936 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:27:09,290 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:27:10,786 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:27:11,028 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:35:15,253 - main - INFO - 应用关闭中...
2025-07-09 17:35:15,288 - main - INFO - 应用关闭中...
2025-07-09 17:35:15,350 - main - INFO - 应用关闭中...
2025-07-09 17:35:15,486 - main - INFO - 应用关闭中...
2025-07-09 17:35:19,678 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 17:35:19,680 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 17:35:19,683 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 17:35:19,686 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 17:35:19,686 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 17:35:19,687 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 17:35:19,922 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 17:35:19,929 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 17:35:20,198 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 17:35:20,199 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 17:35:20,202 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 17:35:20,244 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 17:35:20,247 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 17:35:20,249 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 17:35:20,471 - main - INFO - 题库路由加载成功
2025-07-09 17:35:20,476 - main - INFO - 分析路由加载成功
2025-07-09 17:35:20,484 - main - INFO - 题库路由加载成功
2025-07-09 17:35:20,487 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 17:35:20,487 - main - INFO - 题库路由加载成功
2025-07-09 17:35:20,489 - main - INFO - 分析路由加载成功
2025-07-09 17:35:20,495 - main - INFO - 分析路由加载成功
2025-07-09 17:35:20,500 - main - INFO - AI路由加载成功
2025-07-09 17:35:20,503 - main - INFO - 应用启动中...
2025-07-09 17:35:20,509 - main - INFO - AI路由加载成功
2025-07-09 17:35:20,513 - main - INFO - 应用启动中...
2025-07-09 17:35:20,544 - main - INFO - AI路由加载成功
2025-07-09 17:35:20,544 - main - INFO - 数据库初始化完成
2025-07-09 17:35:20,548 - main - INFO - 应用启动中...
2025-07-09 17:35:20,550 - main - INFO - 数据库初始化完成
2025-07-09 17:35:20,568 - main - INFO - 数据库初始化完成
2025-07-09 17:35:20,574 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 17:35:20,792 - main - INFO - 题库路由加载成功
2025-07-09 17:35:20,796 - main - INFO - 分析路由加载成功
2025-07-09 17:35:20,811 - main - INFO - AI路由加载成功
2025-07-09 17:35:20,813 - main - INFO - 应用启动中...
2025-07-09 17:35:20,819 - main - INFO - 数据库初始化完成
2025-07-09 17:38:44,151 - app.api.auth - INFO - User admin logged in successfully
2025-07-09 17:40:15,732 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:42:49,099 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:43:00,000 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:46:05,407 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:49:46,550 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:50:40,241 - main - INFO - 应用关闭中...
2025-07-09 17:50:40,348 - main - INFO - 应用关闭中...
2025-07-09 17:50:43,328 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 17:50:43,335 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 17:50:43,346 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 17:50:43,353 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 17:50:43,691 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 17:50:43,709 - app.services.ai_service - INFO - DeepSeek AI客户端初始化成功
2025-07-09 17:50:43,727 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 17:50:43,737 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 17:50:43,830 - main - INFO - 题库路由加载成功
2025-07-09 17:50:43,832 - main - INFO - 分析路由加载成功
2025-07-09 17:50:43,833 - main - INFO - 题库路由加载成功
2025-07-09 17:50:43,835 - main - INFO - 分析路由加载成功
2025-07-09 17:50:43,841 - main - INFO - AI路由加载成功
2025-07-09 17:50:43,843 - main - INFO - 应用启动中...
2025-07-09 17:50:43,844 - main - INFO - AI路由加载成功
2025-07-09 17:50:43,846 - main - INFO - 应用启动中...
2025-07-09 17:50:43,849 - main - INFO - 数据库初始化完成
2025-07-09 17:50:43,867 - main - INFO - 数据库初始化完成
2025-07-09 17:51:53,846 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:53:06,005 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:53:08,130 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 17:53:08,408 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\ProgramData\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 23:05:11,627 - __main__ - INFO - 题库路由加载成功
2025-07-09 23:05:11,640 - __main__ - INFO - 分析路由加载成功
2025-07-09 23:05:11,646 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-09 23:05:11,672 - __main__ - INFO - AI路由加载成功
2025-07-09 23:05:13,415 - __mp_main__ - INFO - 题库路由加载成功
2025-07-09 23:05:13,420 - __mp_main__ - INFO - 分析路由加载成功
2025-07-09 23:05:13,421 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-09 23:05:13,445 - __mp_main__ - INFO - AI路由加载成功
2025-07-09 23:05:13,536 - main - INFO - 题库路由加载成功
2025-07-09 23:05:13,538 - main - INFO - 分析路由加载成功
2025-07-09 23:05:13,546 - main - INFO - AI路由加载成功
2025-07-09 23:05:13,547 - main - INFO - 应用启动中...
2025-07-09 23:05:13,567 - main - INFO - 数据库初始化完成
2025-07-09 23:09:10,012 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-09 23:09:22,884 - app.api.auth - WARNING - Login failed for username: admin
2025-07-09 23:09:22,884 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-09 23:09:27,313 - app.api.auth - ERROR - Login error: module 'jwt' has no attribute 'encode'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\services\auth_service.py", line 42, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\utils\jwt.py", line 36, in create_access_token
    encoded_jwt = PyJWT.encode(to_encode,
                  ^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'encode'
2025-07-09 23:09:29,312 - app.api.auth - ERROR - Login error: module 'jwt' has no attribute 'encode'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\services\auth_service.py", line 42, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\utils\jwt.py", line 36, in create_access_token
    encoded_jwt = PyJWT.encode(to_encode,
                  ^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'encode'
2025-07-09 23:19:49,725 - app.api.auth - ERROR - Login error: module 'jwt' has no attribute 'encode'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\services\auth_service.py", line 42, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\utils\jwt.py", line 36, in create_access_token
    encoded_jwt = PyJWT.encode(to_encode,
                  ^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'encode'
2025-07-09 23:30:10,555 - main - INFO - 应用关闭中...
2025-07-10 00:09:40,891 - __main__ - INFO - 题库路由加载成功
2025-07-10 00:09:40,898 - __main__ - INFO - 分析路由加载成功
2025-07-10 00:09:40,902 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 00:09:40,929 - __main__ - INFO - AI路由加载成功
2025-07-10 00:09:43,939 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 00:09:43,945 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 00:09:43,947 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 00:09:43,983 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 00:09:44,142 - main - INFO - 题库路由加载成功
2025-07-10 00:09:44,144 - main - INFO - 分析路由加载成功
2025-07-10 00:09:44,167 - main - INFO - AI路由加载成功
2025-07-10 00:09:44,169 - main - INFO - 应用启动中...
2025-07-10 00:09:44,179 - main - INFO - 数据库初始化完成
2025-07-10 00:10:14,142 - app.api.auth - WARNING - Login failed for username: admin
2025-07-10 00:10:14,142 - app.api.auth - ERROR - Login error: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 54, in simple_login
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: {'error': 'Authentication failed', 'message': 'Invalid username or password'}
2025-07-10 00:10:54,389 - app.api.auth - ERROR - Login error: module 'jwt' has no attribute 'encode'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\services\auth_service.py", line 42, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\utils\jwt.py", line 36, in create_access_token
    encoded_jwt = PyJWT.encode(to_encode,
                  ^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'encode'
2025-07-10 00:10:56,166 - app.api.auth - ERROR - Login error: module 'jwt' has no attribute 'encode'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\services\auth_service.py", line 42, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\utils\jwt.py", line 36, in create_access_token
    encoded_jwt = PyJWT.encode(to_encode,
                  ^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'encode'
2025-07-10 00:15:19,174 - app.api.auth - ERROR - Login error: module 'jwt' has no attribute 'encode'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\services\auth_service.py", line 42, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\utils\jwt.py", line 36, in create_access_token
    encoded_jwt = PyJWT.encode(to_encode,
                  ^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'encode'
2025-07-10 00:21:26,643 - app.api.auth - ERROR - Login error: module 'jwt' has no attribute 'encode'
Traceback (most recent call last):
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\auth.py", line 63, in simple_login
    access_token = auth_service.create_access_token_for_user(user)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\services\auth_service.py", line 42, in create_access_token_for_user
    return create_access_token(data={"sub": user.username},
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\utils\jwt.py", line 36, in create_access_token
    encoded_jwt = PyJWT.encode(to_encode,
                  ^^^^^^^^^^^^
AttributeError: module 'jwt' has no attribute 'encode'
2025-07-10 00:22:26,028 - main - INFO - 应用关闭中...
2025-07-10 00:22:28,737 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 00:22:28,746 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 00:22:28,747 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 00:22:28,799 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 00:22:28,984 - main - INFO - 题库路由加载成功
2025-07-10 00:22:28,987 - main - INFO - 分析路由加载成功
2025-07-10 00:22:29,018 - main - INFO - AI路由加载成功
2025-07-10 00:22:29,021 - main - INFO - 应用启动中...
2025-07-10 00:22:29,032 - main - INFO - 数据库初始化完成
2025-07-10 00:23:22,000 - main - INFO - 应用关闭中...
2025-07-10 00:23:24,252 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 00:23:24,259 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 00:23:24,261 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 00:23:24,308 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 00:23:24,549 - main - INFO - 题库路由加载成功
2025-07-10 00:23:24,553 - main - INFO - 分析路由加载成功
2025-07-10 00:23:24,572 - main - INFO - AI路由加载成功
2025-07-10 00:23:24,573 - main - INFO - 应用启动中...
2025-07-10 00:23:24,580 - main - INFO - 数据库初始化完成
2025-07-10 00:34:09,875 - app.api.auth - INFO - User admin logged in successfully
2025-07-10 00:34:12,741 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:34:15,532 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:34:21,999 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:34:22,025 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:34:22,077 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:34:58,587 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:34:58,627 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:35:09,267 - app.services.ai_service - ERROR - 推荐题目失败: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions 
WHERE questions.difficulty IN (?, ?)
 LIMIT ? OFFSET ?]
[parameters: (1, 2, 10, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:35:09,775 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:35:11,038 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:37:35,560 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:37:42,124 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:37:42,151 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:37:49,538 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: learning_plans.user_profile_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\learning.py", line 244, in get_learning_plans
    plans = db.query(LearningPlan).filter(LearningPlan.user_id == current_user.id).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: learning_plans.user_profile_id
[SQL: SELECT learning_plans.id AS learning_plans_id, learning_plans.user_id AS learning_plans_user_id, learning_plans.user_profile_id AS learning_plans_user_profile_id, learning_plans.plan_type AS learning_plans_plan_type, learning_plans.title AS learning_plans_title, learning_plans.description AS learning_plans_description, learning_plans.start_date AS learning_plans_start_date, learning_plans.end_date AS learning_plans_end_date, learning_plans.status AS learning_plans_status, learning_plans.ai_generated AS learning_plans_ai_generated, learning_plans.created_at AS learning_plans_created_at 
FROM learning_plans 
WHERE learning_plans.user_id = ?]
[parameters: (12,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 00:37:58,357 - main - INFO - 应用关闭中...
2025-07-10 00:38:02,182 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 00:38:02,188 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 00:38:02,190 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 00:38:02,228 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 00:38:02,387 - main - INFO - 题库路由加载成功
2025-07-10 00:38:02,390 - main - INFO - 分析路由加载成功
2025-07-10 00:38:02,403 - main - INFO - AI路由加载成功
2025-07-10 00:38:02,405 - main - INFO - 应用启动中...
2025-07-10 00:38:02,413 - main - INFO - 数据库初始化完成
2025-07-10 00:38:43,515 - main - INFO - 应用关闭中...
2025-07-10 00:38:45,427 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 00:38:45,432 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 00:38:45,434 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 00:38:45,458 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 00:38:45,610 - main - INFO - 题库路由加载成功
2025-07-10 00:38:45,613 - main - INFO - 分析路由加载成功
2025-07-10 00:38:45,626 - main - INFO - AI路由加载成功
2025-07-10 00:38:45,628 - main - INFO - 应用启动中...
2025-07-10 00:38:45,635 - main - INFO - 数据库初始化完成
2025-07-10 00:38:57,918 - main - INFO - 应用关闭中...
2025-07-10 00:39:00,006 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 00:39:00,016 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 00:39:00,018 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 00:39:00,057 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 00:39:00,203 - main - INFO - 题库路由加载成功
2025-07-10 00:39:00,206 - main - INFO - 分析路由加载成功
2025-07-10 00:39:00,216 - main - INFO - AI路由加载成功
2025-07-10 00:39:00,217 - main - INFO - 应用启动中...
2025-07-10 00:39:00,221 - main - INFO - 数据库初始化完成
2025-07-10 00:39:04,702 - main - INFO - 应用关闭中...
2025-07-10 00:39:08,433 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 00:39:08,438 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 00:39:08,440 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 00:39:08,469 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 00:39:08,618 - main - INFO - 题库路由加载成功
2025-07-10 00:39:08,620 - main - INFO - 分析路由加载成功
2025-07-10 00:39:08,630 - main - INFO - AI路由加载成功
2025-07-10 00:39:08,631 - main - INFO - 应用启动中...
2025-07-10 00:39:08,635 - main - INFO - 数据库初始化完成
2025-07-10 01:01:20,949 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 01:01:21,910 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 01:17:48,413 - main - INFO - 应用关闭中...
2025-07-10 01:17:51,738 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 01:17:51,744 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 01:17:51,746 - app.services.ai_service - WARNING - 未配置AI API Key，将使用本地模拟数据
2025-07-10 01:17:51,785 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 01:17:51,980 - main - INFO - 题库路由加载成功
2025-07-10 01:17:51,983 - main - INFO - 分析路由加载成功
2025-07-10 01:17:51,998 - main - INFO - AI路由加载成功
2025-07-10 01:17:51,999 - main - INFO - 应用启动中...
2025-07-10 01:17:52,007 - main - INFO - 数据库初始化完成
2025-07-10 17:06:06,802 - __main__ - INFO - 题库路由加载成功
2025-07-10 17:06:06,811 - __main__ - INFO - 分析路由加载成功
2025-07-10 17:06:06,818 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:06:06,834 - __main__ - INFO - AI路由加载成功
2025-07-10 17:06:08,892 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:06:08,898 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:06:08,899 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:06:08,914 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:06:09,076 - main - INFO - 题库路由加载成功
2025-07-10 17:06:09,081 - main - INFO - 分析路由加载成功
2025-07-10 17:06:09,087 - main - INFO - AI路由加载成功
2025-07-10 17:06:09,088 - main - INFO - 应用启动中...
2025-07-10 17:06:09,116 - main - INFO - 数据库初始化完成
2025-07-10 17:14:34,000 - __main__ - INFO - 题库路由加载成功
2025-07-10 17:14:34,009 - __main__ - INFO - 分析路由加载成功
2025-07-10 17:14:34,010 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:14:34,025 - __main__ - INFO - AI路由加载成功
2025-07-10 17:14:35,837 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:14:35,841 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:14:35,842 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:14:35,855 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:14:35,983 - main - INFO - 题库路由加载成功
2025-07-10 17:14:35,984 - main - INFO - 分析路由加载成功
2025-07-10 17:14:35,989 - main - INFO - AI路由加载成功
2025-07-10 17:14:35,990 - main - INFO - 应用启动中...
2025-07-10 17:14:36,013 - main - INFO - 数据库初始化完成
2025-07-10 17:20:26,411 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:24:31,365 - main - INFO - 应用关闭中...
2025-07-10 17:24:31,381 - main - INFO - 应用关闭中...
2025-07-10 17:24:35,334 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:24:35,339 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:24:35,340 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:24:35,366 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:24:35,577 - main - INFO - 题库路由加载成功
2025-07-10 17:24:35,583 - main - INFO - 分析路由加载成功
2025-07-10 17:24:35,590 - main - INFO - AI路由加载成功
2025-07-10 17:24:35,591 - main - INFO - 应用启动中...
2025-07-10 17:24:35,630 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:24:35,678 - main - INFO - 数据库初始化完成
2025-07-10 17:24:35,687 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:24:35,692 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:24:35,733 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:24:35,906 - main - INFO - 题库路由加载成功
2025-07-10 17:24:35,908 - main - INFO - 分析路由加载成功
2025-07-10 17:24:35,917 - main - INFO - AI路由加载成功
2025-07-10 17:24:35,919 - main - INFO - 应用启动中...
2025-07-10 17:24:35,925 - main - INFO - 数据库初始化完成
2025-07-10 17:27:17,335 - main - INFO - 应用关闭中...
2025-07-10 17:27:17,556 - main - INFO - 应用关闭中...
2025-07-10 17:27:21,660 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:27:21,668 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:27:21,669 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:27:21,692 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:27:21,827 - main - INFO - 题库路由加载成功
2025-07-10 17:27:21,831 - main - INFO - 分析路由加载成功
2025-07-10 17:27:21,837 - main - INFO - AI路由加载成功
2025-07-10 17:27:21,839 - main - INFO - 应用启动中...
2025-07-10 17:27:21,844 - main - INFO - 数据库初始化完成
2025-07-10 17:27:22,075 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:27:22,083 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:27:22,085 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:27:22,108 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:27:22,290 - main - INFO - 题库路由加载成功
2025-07-10 17:27:22,294 - main - INFO - 分析路由加载成功
2025-07-10 17:27:22,304 - main - INFO - AI路由加载成功
2025-07-10 17:27:22,306 - main - INFO - 应用启动中...
2025-07-10 17:27:22,314 - main - INFO - 数据库初始化完成
2025-07-10 17:27:26,551 - main - INFO - 应用关闭中...
2025-07-10 17:27:26,630 - main - INFO - 应用关闭中...
2025-07-10 17:27:30,185 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:27:30,198 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:27:30,200 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:27:30,239 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:27:30,419 - main - INFO - 题库路由加载成功
2025-07-10 17:27:30,423 - main - INFO - 分析路由加载成功
2025-07-10 17:27:30,432 - main - INFO - AI路由加载成功
2025-07-10 17:27:30,434 - main - INFO - 应用启动中...
2025-07-10 17:27:30,439 - main - INFO - 数据库初始化完成
2025-07-10 17:27:30,481 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:27:30,487 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:27:30,488 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:27:30,506 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:27:30,664 - main - INFO - 题库路由加载成功
2025-07-10 17:27:30,668 - main - INFO - 分析路由加载成功
2025-07-10 17:27:30,677 - main - INFO - AI路由加载成功
2025-07-10 17:27:30,679 - main - INFO - 应用启动中...
2025-07-10 17:27:30,686 - main - INFO - 数据库初始化完成
2025-07-10 17:27:31,115 - main - INFO - 应用关闭中...
2025-07-10 17:27:31,207 - main - INFO - 应用关闭中...
2025-07-10 17:27:41,900 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:27:41,969 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:27:41,990 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:27:42,036 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:27:42,368 - main - INFO - 题库路由加载成功
2025-07-10 17:27:42,373 - main - INFO - 分析路由加载成功
2025-07-10 17:27:42,388 - main - INFO - AI路由加载成功
2025-07-10 17:27:42,391 - main - INFO - 应用启动中...
2025-07-10 17:27:42,401 - main - INFO - 数据库初始化完成
2025-07-10 17:27:42,551 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:27:42,561 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:27:42,562 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:27:42,603 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:27:42,836 - main - INFO - 题库路由加载成功
2025-07-10 17:27:42,840 - main - INFO - 分析路由加载成功
2025-07-10 17:27:42,857 - main - INFO - AI路由加载成功
2025-07-10 17:27:42,860 - main - INFO - 应用启动中...
2025-07-10 17:27:42,867 - main - INFO - 数据库初始化完成
2025-07-10 17:28:06,923 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:28:08,708 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:28:09,492 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:28:41,342 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:28:46,549 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:31:51,899 - main - INFO - 应用关闭中...
2025-07-10 17:31:51,916 - main - INFO - 应用关闭中...
2025-07-10 17:31:56,849 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:31:56,858 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:31:56,859 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:31:56,879 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:31:57,003 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:31:57,010 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:31:57,011 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:31:57,021 - main - INFO - 题库路由加载成功
2025-07-10 17:31:57,026 - main - INFO - 分析路由加载成功
2025-07-10 17:31:57,032 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:31:57,034 - main - INFO - AI路由加载成功
2025-07-10 17:31:57,036 - main - INFO - 应用启动中...
2025-07-10 17:31:57,044 - main - INFO - 数据库初始化完成
2025-07-10 17:31:57,185 - main - INFO - 题库路由加载成功
2025-07-10 17:31:57,187 - main - INFO - 分析路由加载成功
2025-07-10 17:31:57,196 - main - INFO - AI路由加载成功
2025-07-10 17:31:57,198 - main - INFO - 应用启动中...
2025-07-10 17:31:57,205 - main - INFO - 数据库初始化完成
2025-07-10 17:32:07,208 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:32:08,644 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:32:16,040 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:33:33,898 - main - INFO - 应用关闭中...
2025-07-10 17:33:33,898 - main - INFO - 应用关闭中...
2025-07-10 17:33:37,042 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:33:37,049 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:33:37,050 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:33:37,071 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:33:37,198 - main - INFO - 题库路由加载成功
2025-07-10 17:33:37,201 - main - INFO - 分析路由加载成功
2025-07-10 17:33:37,212 - main - INFO - AI路由加载成功
2025-07-10 17:33:37,215 - main - INFO - 应用启动中...
2025-07-10 17:33:37,224 - main - INFO - 数据库初始化完成
2025-07-10 17:33:37,309 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:33:37,314 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:33:37,316 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:33:37,341 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:33:37,490 - main - INFO - 题库路由加载成功
2025-07-10 17:33:37,492 - main - INFO - 分析路由加载成功
2025-07-10 17:33:37,498 - main - INFO - AI路由加载成功
2025-07-10 17:33:37,500 - main - INFO - 应用启动中...
2025-07-10 17:33:37,505 - main - INFO - 数据库初始化完成
2025-07-10 17:33:50,081 - main - INFO - 应用关闭中...
2025-07-10 17:33:50,141 - main - INFO - 应用关闭中...
2025-07-10 17:33:53,335 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:33:53,342 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:33:53,344 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:33:53,367 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:33:53,376 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:33:53,526 - main - INFO - 题库路由加载成功
2025-07-10 17:33:53,530 - main - INFO - 分析路由加载成功
2025-07-10 17:33:53,542 - main - INFO - AI路由加载成功
2025-07-10 17:33:53,544 - main - INFO - 仪表板路由加载成功
2025-07-10 17:33:53,547 - main - INFO - 应用启动中...
2025-07-10 17:33:53,554 - main - INFO - 数据库初始化完成
2025-07-10 17:33:53,718 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:33:53,730 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:33:53,732 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:33:53,757 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:33:53,764 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:33:53,971 - main - INFO - 题库路由加载成功
2025-07-10 17:33:53,974 - main - INFO - 分析路由加载成功
2025-07-10 17:33:53,984 - main - INFO - AI路由加载成功
2025-07-10 17:33:53,986 - main - INFO - 仪表板路由加载成功
2025-07-10 17:33:53,993 - main - INFO - 应用启动中...
2025-07-10 17:33:54,003 - main - INFO - 数据库初始化完成
2025-07-10 17:34:01,505 - main - INFO - 应用关闭中...
2025-07-10 17:34:01,627 - main - INFO - 应用关闭中...
2025-07-10 17:34:04,785 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:34:04,793 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:34:04,795 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:34:04,824 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:34:04,832 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:34:04,988 - main - INFO - 题库路由加载成功
2025-07-10 17:34:04,991 - main - INFO - 分析路由加载成功
2025-07-10 17:34:05,001 - main - INFO - AI路由加载成功
2025-07-10 17:34:05,003 - main - INFO - 仪表板路由加载成功
2025-07-10 17:34:05,005 - main - INFO - 应用启动中...
2025-07-10 17:34:05,013 - main - INFO - 数据库初始化完成
2025-07-10 17:34:05,038 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:34:05,288 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:34:05,300 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:34:05,302 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:34:05,337 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:34:05,346 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:34:05,539 - main - INFO - 题库路由加载成功
2025-07-10 17:34:05,543 - main - INFO - 分析路由加载成功
2025-07-10 17:34:05,552 - main - INFO - AI路由加载成功
2025-07-10 17:34:05,554 - main - INFO - 仪表板路由加载成功
2025-07-10 17:34:05,555 - main - INFO - 应用启动中...
2025-07-10 17:34:05,562 - main - INFO - 数据库初始化完成
2025-07-10 17:34:05,565 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:42:41,988 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:42:48,018 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:44:11,408 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:44:12,539 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:46:43,780 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:46:46,673 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:46:56,867 - main - INFO - 应用关闭中...
2025-07-10 17:46:56,871 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:46:57,083 - main - INFO - 应用关闭中...
2025-07-10 17:46:57,088 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:01,445 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:01,454 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:01,456 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:01,485 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:01,490 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:01,669 - main - INFO - 题库路由加载成功
2025-07-10 17:47:01,673 - main - INFO - 分析路由加载成功
2025-07-10 17:47:01,689 - main - INFO - AI路由加载成功
2025-07-10 17:47:01,692 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:01,695 - main - INFO - 应用启动中...
2025-07-10 17:47:01,709 - main - INFO - 数据库初始化完成
2025-07-10 17:47:01,718 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:01,789 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:01,798 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:01,800 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:01,828 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:01,837 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:02,085 - main - INFO - 题库路由加载成功
2025-07-10 17:47:02,089 - main - INFO - 分析路由加载成功
2025-07-10 17:47:02,100 - main - INFO - AI路由加载成功
2025-07-10 17:47:02,101 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:02,103 - main - INFO - 应用启动中...
2025-07-10 17:47:02,109 - main - INFO - 数据库初始化完成
2025-07-10 17:47:02,117 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:07,817 - main - INFO - 应用关闭中...
2025-07-10 17:47:07,818 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:07,879 - main - INFO - 应用关闭中...
2025-07-10 17:47:07,882 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:10,596 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:10,601 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:10,602 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:10,619 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:10,624 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:10,767 - main - INFO - 题库路由加载成功
2025-07-10 17:47:10,770 - main - INFO - 分析路由加载成功
2025-07-10 17:47:10,779 - main - INFO - AI路由加载成功
2025-07-10 17:47:10,783 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:10,785 - main - INFO - 应用启动中...
2025-07-10 17:47:10,795 - main - INFO - 数据库初始化完成
2025-07-10 17:47:10,802 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:10,940 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:10,945 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:10,947 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:10,965 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:10,970 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:11,112 - main - INFO - 题库路由加载成功
2025-07-10 17:47:11,114 - main - INFO - 分析路由加载成功
2025-07-10 17:47:11,120 - main - INFO - AI路由加载成功
2025-07-10 17:47:11,122 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:11,123 - main - INFO - 应用启动中...
2025-07-10 17:47:11,129 - main - INFO - 数据库初始化完成
2025-07-10 17:47:11,133 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:12,546 - main - INFO - 应用关闭中...
2025-07-10 17:47:12,548 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:12,654 - main - INFO - 应用关闭中...
2025-07-10 17:47:12,657 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:15,798 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:15,805 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:15,806 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:15,835 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:15,843 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:16,026 - main - INFO - 题库路由加载成功
2025-07-10 17:47:16,029 - main - INFO - 分析路由加载成功
2025-07-10 17:47:16,039 - main - INFO - AI路由加载成功
2025-07-10 17:47:16,044 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:16,046 - main - INFO - 应用启动中...
2025-07-10 17:47:16,055 - main - INFO - 数据库初始化完成
2025-07-10 17:47:16,061 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:16,153 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:16,162 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:16,164 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:16,200 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:16,207 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:16,406 - main - INFO - 题库路由加载成功
2025-07-10 17:47:16,410 - main - INFO - 分析路由加载成功
2025-07-10 17:47:16,421 - main - INFO - AI路由加载成功
2025-07-10 17:47:16,423 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:16,424 - main - INFO - 应用启动中...
2025-07-10 17:47:16,433 - main - INFO - 数据库初始化完成
2025-07-10 17:47:16,437 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:27,215 - main - INFO - 应用关闭中...
2025-07-10 17:47:27,218 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:27,497 - main - INFO - 应用关闭中...
2025-07-10 17:47:27,499 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:30,490 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:30,497 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:30,499 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:30,520 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:30,530 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:30,532 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:30,533 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:30,541 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:30,561 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:30,568 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:30,748 - main - INFO - 题库路由加载成功
2025-07-10 17:47:30,750 - main - INFO - 分析路由加载成功
2025-07-10 17:47:30,753 - main - INFO - 题库路由加载成功
2025-07-10 17:47:30,761 - main - INFO - 分析路由加载成功
2025-07-10 17:47:30,764 - main - INFO - AI路由加载成功
2025-07-10 17:47:30,767 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:30,768 - main - INFO - 应用启动中...
2025-07-10 17:47:30,772 - main - INFO - AI路由加载成功
2025-07-10 17:47:30,775 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:30,777 - main - INFO - 应用启动中...
2025-07-10 17:47:30,777 - main - INFO - 数据库初始化完成
2025-07-10 17:47:30,782 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:30,783 - main - INFO - 数据库初始化完成
2025-07-10 17:47:30,787 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:37,762 - main - INFO - 应用关闭中...
2025-07-10 17:47:37,765 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:37,870 - main - INFO - 应用关闭中...
2025-07-10 17:47:37,873 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:40,689 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:40,697 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:40,699 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:40,728 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:40,734 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:40,879 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:40,887 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:40,889 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:40,890 - main - INFO - 题库路由加载成功
2025-07-10 17:47:40,894 - main - INFO - 分析路由加载成功
2025-07-10 17:47:40,904 - main - INFO - AI路由加载成功
2025-07-10 17:47:40,907 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:40,909 - main - INFO - 应用启动中...
2025-07-10 17:47:40,917 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:40,917 - main - INFO - 数据库初始化完成
2025-07-10 17:47:40,923 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:40,925 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:41,088 - main - INFO - 题库路由加载成功
2025-07-10 17:47:41,091 - main - INFO - 分析路由加载成功
2025-07-10 17:47:41,099 - main - INFO - AI路由加载成功
2025-07-10 17:47:41,100 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:41,103 - main - INFO - 应用启动中...
2025-07-10 17:47:41,110 - main - INFO - 数据库初始化完成
2025-07-10 17:47:41,115 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:47:55,155 - main - INFO - 应用关闭中...
2025-07-10 17:47:55,158 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:55,170 - main - INFO - 应用关闭中...
2025-07-10 17:47:55,173 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:47:59,544 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:47:59,586 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:47:59,589 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:47:59,638 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:47:59,651 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:47:59,910 - main - INFO - 题库路由加载成功
2025-07-10 17:47:59,913 - main - INFO - 分析路由加载成功
2025-07-10 17:47:59,925 - main - INFO - AI路由加载成功
2025-07-10 17:47:59,928 - main - INFO - 仪表板路由加载成功
2025-07-10 17:47:59,930 - main - INFO - 应用启动中...
2025-07-10 17:47:59,939 - main - INFO - 数据库初始化完成
2025-07-10 17:47:59,947 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:48:00,122 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:48:00,134 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:48:00,136 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:48:00,168 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:48:00,176 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:48:00,410 - main - INFO - 题库路由加载成功
2025-07-10 17:48:00,412 - main - INFO - 分析路由加载成功
2025-07-10 17:48:00,419 - main - INFO - AI路由加载成功
2025-07-10 17:48:00,422 - main - INFO - 仪表板路由加载成功
2025-07-10 17:48:00,423 - main - INFO - 应用启动中...
2025-07-10 17:48:00,430 - main - INFO - 数据库初始化完成
2025-07-10 17:48:00,436 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:48:04,673 - main - INFO - 应用关闭中...
2025-07-10 17:48:04,677 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:48:04,735 - main - INFO - 应用关闭中...
2025-07-10 17:48:04,737 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 17:48:09,942 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:48:09,954 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:48:09,956 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:48:09,995 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:48:10,005 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:48:10,381 - main - INFO - 题库路由加载成功
2025-07-10 17:48:10,388 - main - INFO - 分析路由加载成功
2025-07-10 17:48:10,406 - main - INFO - AI路由加载成功
2025-07-10 17:48:10,417 - main - INFO - 仪表板路由加载成功
2025-07-10 17:48:10,423 - main - INFO - 应用启动中...
2025-07-10 17:48:10,442 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 17:48:10,445 - main - INFO - 数据库初始化完成
2025-07-10 17:48:10,470 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 17:48:10,482 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 17:48:10,482 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:48:10,526 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 17:48:10,535 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 17:48:10,760 - main - INFO - 题库路由加载成功
2025-07-10 17:48:10,766 - main - INFO - 分析路由加载成功
2025-07-10 17:48:10,780 - main - INFO - AI路由加载成功
2025-07-10 17:48:10,782 - main - INFO - 仪表板路由加载成功
2025-07-10 17:48:10,784 - main - INFO - 应用启动中...
2025-07-10 17:48:10,792 - main - INFO - 数据库初始化完成
2025-07-10 17:48:10,799 - main - WARNING - 定时任务服务启动失败: No module named 'schedule'
2025-07-10 17:56:51,648 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 17:56:55,362 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 18:06:40,224 - main - INFO - 应用关闭中...
2025-07-10 18:06:40,230 - main - WARNING - 定时任务服务停止失败: No module named 'schedule'
2025-07-10 18:07:02,935 - __main__ - INFO - 题库路由加载成功
2025-07-10 18:07:02,941 - __main__ - INFO - 分析路由加载成功
2025-07-10 18:07:02,942 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 18:07:02,959 - __main__ - INFO - AI路由加载成功
2025-07-10 18:07:02,966 - __main__ - INFO - 仪表板路由加载成功
2025-07-10 18:07:05,645 - __mp_main__ - INFO - 题库路由加载成功
2025-07-10 18:07:05,651 - __mp_main__ - INFO - 分析路由加载成功
2025-07-10 18:07:05,653 - app.services.ai_service - WARNING - 未配置任何AI API Key，将使用本地模拟数据
2025-07-10 18:07:05,672 - __mp_main__ - INFO - AI路由加载成功
2025-07-10 18:07:05,677 - __mp_main__ - INFO - 仪表板路由加载成功
2025-07-10 18:07:05,840 - main - INFO - 题库路由加载成功
2025-07-10 18:07:05,842 - main - INFO - 分析路由加载成功
2025-07-10 18:07:05,850 - main - INFO - AI路由加载成功
2025-07-10 18:07:05,852 - main - INFO - 仪表板路由加载成功
2025-07-10 18:07:05,854 - main - INFO - 应用启动中...
2025-07-10 18:07:05,860 - main - INFO - 数据库初始化完成
2025-07-10 18:07:05,870 - app.services.scheduler_service - INFO - 定时任务服务启动成功
2025-07-10 18:07:05,870 - main - INFO - 定时任务服务启动成功
2025-07-10 18:08:06,264 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-07-10 18:08:14,408 - main - ERROR - 未处理的异常: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: questions.source

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\anyio\_backends\_asyncio.py", line 967, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\projects\aiedu-2\backend\app\api\question.py", line 38, in read_questions
    return db.query(Question).offset(skip).limit(limit).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\brian\anaconda3\envs\edu\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: questions.source
[SQL: SELECT questions.id AS questions_id, questions.question_type AS questions_question_type, questions.content AS questions_content, questions.options AS questions_options, questions.answer AS questions_answer, questions.explanation AS questions_explanation, questions.difficulty AS questions_difficulty, questions.source AS questions_source, questions.tags AS questions_tags, questions.estimated_time AS questions_estimated_time, questions.success_rate AS questions_success_rate, questions.usage_count AS questions_usage_count, questions.is_active AS questions_is_active, questions.created_at AS questions_created_at, questions.updated_at AS questions_updated_at, questions.category_id AS questions_category_id, questions.created_by AS questions_created_by 
FROM questions
 LIMIT ? OFFSET ?]
[parameters: (100, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
